<!DOCTYPE html><html lang="zh-Hans"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.4544bb36d27ac5332003.css" id="gatsby-global-css">@import url(https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Ubuntu+Mono&display=swap);@import url(https://fonts.googleapis.com/css2?family=family=PT+Mono&display=swap);@import url(https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@200&display=swap);code[class*=language-],pre[class*=language-]{color:#393a34;font-family:Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre>code[class*=language-]{font-size:1em}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#b3d4fc}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border:1px solid #ddd;background-color:#fff}:not(pre)>code[class*=language-]{padding:1px .2em;background:#f8f8f8;border:1px solid #ddd}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#998;font-style:italic}.token.namespace{opacity:.7}.token.attr-value,.token.string{color:#e3116c}.token.operator,.token.punctuation{color:#393a34}.token.boolean,.token.constant,.token.entity,.token.inserted,.token.number,.token.property,.token.regex,.token.symbol,.token.url,.token.variable{color:#36acaa}.language-autohotkey .token.selector,.token.atrule,.token.attr-name,.token.keyword{color:#00a4db}.language-autohotkey .token.tag,.token.deleted,.token.function{color:#9a050f}.language-autohotkey .token.keyword,.token.selector,.token.tag{color:#00009f}.token.bold,.token.function,.token.important{font-weight:700}.token.italic{font-style:italic}@font-face{font-family:CELESTE;font-weight:400;font-style:normal;src:url(/static/s-regular-9385fd1fd5c61b2cc614a0be00313964.woff2) format("woff2"),url(/static/s-regular-c009677c4a2159ee7f31bf4bc1e7e7a6.woff) format("woff"),url(/static/s-regular-6c9821a2719dc9504f7e81fa9cc55bbf.ttf) format("opentype"),local(Celeste)}@font-face{font-family:CELESTE;font-weight:400;font-style:italic;src:url(/static/s-italic-9706ea536e833c7f98205f87202df48e.woff2) format("woff2"),url(/static/s-italic-fd72769f97e24173ac034d353aa1ebe8.woff) format("woff"),url(/static/s-italic-4412ef3337fd1eff88b7b0910eac0dcc.ttf) format("opentype"),local(Celeste)}@font-face{font-family:CELESTE;font-weight:700;font-style:normal;src:url(/static/s-bold-f52d2380d3f5875990471dffa2dfa2cb.woff2) format("woff2"),url(/static/s-bold-a331fe095a1bb65f576f95f99d9f6b55.woff) format("woff"),url(/static/s-bold-854de931719c78ccceba7db15e8fcbc9.ttf) format("opentype"),local(Celeste)}@font-face{font-family:CELESTE;font-weight:700;font-style:italic;src:url(/static/s-bolditalic-88ffe17e4056b6e1c6e82066d635038d.woff2) format("woff2"),url(/static/s-bolditalic-76f64c7f336514821205b11143f80d2c.woff) format("woff"),url(/static/s-bolditalic-4404e053c83660e45626cfdde1e90390.ttf) format("opentype"),local(Celeste)}/*! normalize.css v4.0.0 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,select,textarea{font:inherit}optgroup{font-weight:700}button,input,select{overflow:visible}button,input,select,textarea{margin:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{cursor:pointer}[disabled]{cursor:default}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}button:-moz-focusring,input:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}html{line-height:1.3;-webkit-font-smoothing:subpixel-antialiased}ol,ul{padding-left:2em}blockquote,figure{margin-left:2em;margin-right:2em}address{font-style:inherit}pre{overflow:auto;white-space:pre;word-wrap:normal}a{text-decoration:inherit}em:lang(ja),em:lang(zh){-moz-text-emphasis:filled circle;-webkit-text-emphasis:filled circle;text-emphasis:filled circle;-moz-text-emphasis-position:under;-webkit-text-emphasis-position:under;text-emphasis-position:under;font-style:inherit;border-bottom:0 dotted;padding-bottom:0}em:lang(ja){-moz-text-emphasis:filled sesame;-webkit-text-emphasis:filled sesame;text-emphasis:filled sesame;-moz-text-emphasis-position:over;-webkit-text-emphasis-position:over;text-emphasis-position:over}dfn:lang(ja),dfn:lang(zh){font-weight:inherit;font-style:inherit;font-weight:bolder}cite:lang(ja),cite:lang(zh){font-style:inherit}q{quotes:"\201C" "\201D" "\2018" "\2019" "\201C" "\201D" "\2018" "\2019" "\201C" "\201D" "\2018" "\2019"}q:lang(zh){quotes:"\300C" "\300D" "\300E" "\300F" "\300C" "\300D" "\300E" "\300F" "\300C" "\300D" "\300E" "\300F"}q:lang(en),q:lang(zh-CN){quotes:"\201C" "\201D" "\2018" "\2019" "\201C" "\201D" "\2018" "\2019" "\201C" "\201D" "\2018" "\2019"}q:lang(en-GB){quotes:"\2018" "\2019" "\201C" "\201D" "\2018" "\2019" "\201C" "\201D" "\2018" "\2019" "\201C" "\201D"}q:before{content:open-quote}q:after{content:close-quote}q:lang(ja):after,q:lang(ja):before{content:none}code,kbd,pre,samp{font-family:monospace,monospace,sans-serif}i:lang(ja),i:lang(zh),var:lang(ja),var:lang(zh){font-family:cursive,serif;font-style:inherit}.han-js-rendered del+del.adjacent,.han-js-rendered del+s.adjacent,.han-js-rendered ins.adjacent,.han-js-rendered s+del.adjacent,.han-js-rendered s+s.adjacent,.han-js-rendered u.adjacent,del+del,del+s,ins+ins,ins+u,s+del,s+s,u+ins,u+u{margin-left:.125em}ins,u{padding-bottom:.05em;border-bottom:1px solid;text-decoration:none}ruby rtc rt{display:inline;font-size:inherit}ruby.mps,ruby.zhuyin{display:ruby;-webkit-ruby-position:inter-character;ruby-position:inter-character}ruby.mps>rt,ruby.zhuyin>rt{-webkit-transform:scale(.8);transform:scale(.8);-webkit-transform-origin:left center;transform-origin:left center;font-size:.5em}ruby.mps>rt:empty,ruby.zhuyin>rt:empty{display:none}.han-js-rendered del+del,.han-js-rendered del+s,.han-js-rendered ins+ins,.han-js-rendered ins+u,.han-js-rendered s+del,.han-js-rendered s+s,.han-js-rendered u+ins,.han-js-rendered u+u{margin-left:auto}.han-js-rendered em:lang(ja),.han-js-rendered em:lang(zh){padding-bottom:auto;border-bottom-width:0}.no-textemphasis em:lang(ja),.no-textemphasis em:lang(zh){line-height:2}.no-textemphasis em:lang(ja) h-char,.no-textemphasis em:lang(zh) h-char{position:relative;font-style:inherit}.no-textemphasis em:lang(ja) h-char:after,.no-textemphasis em:lang(zh) h-char:after{-moz-text-emphasis:none;-webkit-text-emphasis:none;text-emphasis:none;font-style:normal;font-weight:400;line-height:normal;text-decoration:none;-webkit-transform:scale(.5);transform:scale(.5);position:absolute;left:50%;top:0;margin-left:-250%;overflow:hidden;display:inline-block;height:1em;width:500%;line-height:1;text-align:center;text-indent:0;font-family:Georgia,Times New Roman,Arial!important}em:lang(ja) h-char.biaodian,em:lang(ja) h-char.punct,em:lang(zh) h-char.biaodian,em:lang(zh) h-char.punct{-moz-text-emphasis:none;-webkit-text-emphasis:none;text-emphasis:none}.no-textemphasis em:lang(ja) h-char.biaodian:after,.no-textemphasis em:lang(ja) h-char.punct:after,.no-textemphasis em:lang(zh) h-char.biaodian:after,.no-textemphasis em:lang(zh) h-char.punct:after{content:none!important}.no-textemphasis em:lang(zh) h-char:after{margin-top:1em;content:"\25CF"}.no-textemphasis em:lang(ja) h-char:after{margin-top:-.7em;content:"\FE45"}h-ruby.zhuyin h-zhuyin,ruby.mps h-zhuyin,ruby.zhuyin h-zhuyin{position:relative;letter-spacing:0}h-ruby.zhuyin h-diao,ruby.mps h-diao,ruby.zhuyin h-diao{position:absolute;right:-.9em;bottom:.5em;display:block;font-size:1.5em}h-ruby.zhuyin h-diao h-char,ruby.mps h-diao h-char,ruby.zhuyin h-diao h-char{-webkit-writing-mode:horizontal-tb;-ms-writing-mode:lr-tb;writing-mode:horizontal-tb}h-ruby.zhuyin [diao=˙] h-diao,ruby.mps [diao=˙] h-diao,ruby.zhuyin [diao=˙] h-diao{top:-.3em;right:auto;bottom:auto;left:0;font-size:1em}h-ruby.zhuyin [diao=󳆴] h-diao,h-ruby.zhuyin [diao=󳆵] h-diao,h-ruby.zhuyin [diao=󳆶] h-diao,h-ruby.zhuyin [diao=󳆷] h-diao,h-ruby.zhuyin [diao^=ㆴ] h-diao,h-ruby.zhuyin [diao^=ㆵ] h-diao,h-ruby.zhuyin [diao^=ㆶ] h-diao,h-ruby.zhuyin [diao^=ㆷ] h-diao,ruby.mps [diao=󳆴] h-diao,ruby.mps [diao=󳆵] h-diao,ruby.mps [diao=󳆶] h-diao,ruby.mps [diao=󳆷] h-diao,ruby.mps [diao^=ㆴ] h-diao,ruby.mps [diao^=ㆵ] h-diao,ruby.mps [diao^=ㆶ] h-diao,ruby.mps [diao^=ㆷ] h-diao,ruby.zhuyin [diao=󳆴] h-diao,ruby.zhuyin [diao=󳆵] h-diao,ruby.zhuyin [diao=󳆶] h-diao,ruby.zhuyin [diao=󳆷] h-diao,ruby.zhuyin [diao^=ㆴ] h-diao,ruby.zhuyin [diao^=ㆵ] h-diao,ruby.zhuyin [diao^=ㆶ] h-diao,ruby.zhuyin [diao^=ㆷ] h-diao{right:-1em;bottom:-.125em;font-size:1em}h-ru[annotation]{position:relative;display:inline-table;border-collapse:collapse;border-spacing:0;line-height:1.1;text-align:center;vertical-align:1em}h-ru[annotation]>h-ru[annotation]{vertical-align:-.1em}h-ru[annotation]>h-ru,h-ru[annotation]>rb,h-ru[annotation]>rt{line-height:1;text-align:center}h-ru[annotation]>rt{display:table-header-group;height:1em;font-size:.5em;white-space:nowrap;word-break:normal}h-ru[annotation]>rt:after,h-ru[annotation]>rt:before{content:"\2006"}h-ru[order="0"]>rt,h-ruby[rightangle][doubleline] h-ru[order="0"]>rt{display:table-header-group}h-ru[order="1"]>rt,h-ruby[rightangle][doubleline] h-ru[order="1"]>rt,h-ruby[rightangle] h-ru[order="0"]>rt{display:table-footer-group}h-ru[order="0"]>h-ru[order="1"]{vertical-align:.15em}h-ruby[rightangle][doubleline] h-ru[order="0"] rt{line-height:1.5}h-ruby[rightangle][doubleline] h-ru[annotation]{vertical-align:.5em}[zhuyin] h-zhuyin{-moz-text-emphasis:none;-webkit-text-emphasis:none;text-emphasis:none;font-style:normal;font-weight:400;line-height:normal;text-decoration:none;text-indent:0;position:relative;display:inline-block;height:1em;width:.4em;vertical-align:text-top}[zhuyin] h-zhuyin>*{-webkit-transform:scale(.4);transform:scale(.4);-webkit-transform-origin:left top;transform-origin:left top;display:inline-block}[zhuyin] h-yin{left:0;height:1em;vertical-align:top}[zhuyin] h-diao,[zhuyin] h-yin{position:absolute;line-height:1}[zhuyin] h-diao{bottom:0;right:-.9em}[zhuyin] h-diao:empty,[zhuyin] h-yin:empty{display:none}[zhuyin] [length="0"]{margin-right:0}[zhuyin] [length="0"] h-zhuyin{display:none}[zhuyin] [length="1"] h-yin{top:.3em}[zhuyin] [length="1"] h-diao{bottom:0}[zhuyin] [length="2"] h-yin{top:.05em}[zhuyin] [length="2"] h-diao{bottom:-.3em}[zhuyin] [length="3"] h-yin{top:-.05em;line-height:.85}[zhuyin] [length="3"] h-diao{bottom:-.35em}[zhuyin] [diao=˙] h-diao{top:0;right:auto;bottom:auto;left:.06em}[zhuyin] [diao=˙] [length="1"] h-diao{top:.15em}[zhuyin] [diao=˙] [length="2"] h-diao{top:-.05em}[zhuyin] [diao=˙] [length="3"] h-diao{top:-.2em}[zhuyin] [diao=˪] h-diao,[zhuyin] [diao=˫] h-diao{-webkit-transform:scale(.6);transform:scale(.6);-webkit-transform-origin:left top;transform-origin:left top}[zhuyin] [diao=󳆴] h-diao,[zhuyin] [diao=󳆵] h-diao,[zhuyin] [diao=󳆶] h-diao,[zhuyin] [diao=󳆷] h-diao,[zhuyin] [diao^=ㆴ] h-diao,[zhuyin] [diao^=ㆵ] h-diao,[zhuyin] [diao^=ㆶ] h-diao,[zhuyin] [diao^=ㆷ] h-diao{bottom:-.6em;margin-right:.3em}[zhuyin]{margin-right:.2em;display:inline-block;line-height:1.8}[rightangle] h-ru[annotation]{vertical-align:0;line-height:1}[rightangle] rt:after{content:"";display:inline-block;width:1.2em}h-ru h-ru[zhuyin]{margin-top:-.4em;margin-bottom:-.2em;line-height:1.8}h-jinze,h-word{display:inline-block;text-indent:0}@font-face{font-family:Han Heiti;src:local("Hiragino Sans GB"),local("Lantinghei TC Extralight"),local("Lantinghei SC Extralight"),local(FZLTXHB--B51-0),local(FZLTZHK--GBK1-0),local(".PingFang SC Light"),local(".PingFang TC Light"),local(".PingFang-SC-Light"),local(".PingFang-TC-Light"),local(".PingFang SC"),local(".PingFang TC"),local("Heiti SC Light"),local(STHeitiSC-Light),local("Heiti SC"),local("Heiti TC Light"),local(STHeitiTC-Light),local("Heiti TC"),local("Microsoft Yahei"),local("Microsoft Jhenghei"),local("Noto Sans CJK KR"),local("Noto Sans CJK JP"),local("Noto Sans CJK SC"),local("Noto Sans CJK TC"),local("Source Han Sans K"),local("Source Han Sans KR"),local("Source Han Sans JP"),local("Source Han Sans CN"),local("Source Han Sans HK"),local("Source Han Sans TW"),local("Source Han Sans TWHK"),local("Droid Sans Fallback")}@font-face{unicode-range:U+4e00-9fff,U+3400-4db5,U+20000-2a6d6,U+2a700-2b734,U+2b740-2b81d,U+fa0e-fa0f,U+fa11,U+fa13-fa14,U+fa1f,U+fa21,U+fa23,U+fa24,U+fa27-fa29,U+3040-309f,U+30a0-30ff,U+3099-309e,U+ff66-ff9f,U+3007,U+31c0-31e3,U+2f00-2fd5,U+2e80-2ef3;font-family:Han Heiti;src:local(YuGothic),local("Hiragino Kaku Gothic ProN"),local("Hiragino Kaku Gothic Pro")}@font-face{font-family:Han Heiti CNS;src:local(".PingFang TC Light"),local(".PingFang-TC-Light"),local(".PingFang TC"),local("Heiti TC Light"),local(STHeitiTC-Light),local("Heiti TC"),local("Lantinghei TC Extralight"),local(FZLTXHB--B51-0),local("Lantinghei TC"),local("Microsoft Jhenghei"),local("Microsoft Yahei"),local("Noto Sans CJK TC"),local("Source Han Sans TC"),local("Source Han Sans TW"),local("Source Han Sans TWHK"),local("Source Han Sans HK"),local("Droid Sans Fallback")}@font-face{font-family:Han Heiti GB;src:local("Hiragino Sans GB"),local(".PingFang SC Light"),local(".PingFang-SC-Light"),local(".PingFang SC"),local("Lantinghei SC Extralight"),local(FZLTXHK--GBK1-0),local("Lantinghei SC"),local("Heiti SC Light"),local(STHeitiSC-Light),local("Heiti SC"),local("Microsoft Yahei"),local("Noto Sans CJK SC"),local("Source Han Sans SC"),local("Source Han Sans CN"),local("Droid Sans Fallback")}@font-face{font-family:Han Heiti;font-weight:600;src:local("Hiragino Sans GB W6"),local(HiraginoSansGB-W6),local("Lantinghei TC Demibold"),local("Lantinghei SC Demibold"),local(FZLTZHB--B51-0),local(FZLTZHK--GBK1-0),local(".PingFang-SC-Semibold"),local(".PingFang-TC-Semibold"),local("Heiti SC Medium"),local("STHeitiSC-Medium"),local("Heiti SC"),local("Heiti TC Medium"),local("STHeitiTC-Medium"),local("Heiti TC"),local("Microsoft YaHei Bold"),local("Microsoft Jhenghei Bold"),local(MicrosoftYaHei-Bold),local(MicrosoftJhengHeiBold),local("Microsoft YaHei"),local("Microsoft Jhenghei"),local("Noto Sans CJK KR Bold"),local("Noto Sans CJK JP Bold"),local("Noto Sans CJK SC Bold"),local("Noto Sans CJK TC Bold"),local(NotoSansCJKkr-Bold),local(NotoSansCJKjp-Bold),local(NotoSansCJKsc-Bold),local(NotoSansCJKtc-Bold),local("Source Han Sans K Bold"),local(SourceHanSansK-Bold),local("Source Han Sans K"),local("Source Han Sans KR Bold"),local("Source Han Sans JP Bold"),local("Source Han Sans CN Bold"),local("Source Han Sans HK Bold"),local("Source Han Sans TW Bold"),local("Source Han Sans TWHK Bold"),local("SourceHanSansKR-Bold"),local("SourceHanSansJP-Bold"),local("SourceHanSansCN-Bold"),local("SourceHanSansHK-Bold"),local("SourceHanSansTW-Bold"),local("SourceHanSansTWHK-Bold"),local("Source Han Sans KR"),local("Source Han Sans CN"),local("Source Han Sans HK"),local("Source Han Sans TW"),local("Source Han Sans TWHK")}@font-face{unicode-range:U+4e00-9fff,U+3400-4db5,U+20000-2a6d6,U+2a700-2b734,U+2b740-2b81d,U+fa0e-fa0f,U+fa11,U+fa13-fa14,U+fa1f,U+fa21,U+fa23,U+fa24,U+fa27-fa29,U+3040-309f,U+30a0-30ff,U+3099-309e,U+ff66-ff9f,U+3007,U+31c0-31e3,U+2f00-2fd5,U+2e80-2ef3;font-family:Han Heiti;font-weight:600;src:local("YuGothic Bold"),local("Hiragino Kaku Gothic ProN W6"),local("Hiragino Kaku Gothic Pro W6"),local(YuGo-Bold),local(HiraKakuProN-W6),local(HiraKakuPro-W6)}@font-face{font-family:Han Heiti CNS;font-weight:600;src:local(".PingFang TC Semibold"),local(".PingFang-TC-Semibold"),local("Heiti TC Medium"),local("STHeitiTC-Medium"),local("Heiti TC"),local("Lantinghei TC Demibold"),local(FZLTXHB--B51-0),local("Microsoft Jhenghei Bold"),local(MicrosoftJhengHeiBold),local("Microsoft Jhenghei"),local("Microsoft YaHei Bold"),local(MicrosoftYaHei-Bold),local("Noto Sans CJK TC Bold"),local(NotoSansCJKtc-Bold),local("Noto Sans CJK TC"),local("Source Han Sans TC Bold"),local("SourceHanSansTC-Bold"),local("Source Han Sans TC"),local("Source Han Sans TW Bold"),local("SourceHanSans-TW"),local("Source Han Sans TW"),local("Source Han Sans TWHK Bold"),local("SourceHanSans-TWHK"),local("Source Han Sans TWHK"),local("Source Han Sans HK"),local("SourceHanSans-HK"),local("Source Han Sans HK")}@font-face{font-family:Han Heiti GB;font-weight:600;src:local("Hiragino Sans GB W6"),local(HiraginoSansGB-W6),local(".PingFang SC Semibold"),local(".PingFang-SC-Semibold"),local("Lantinghei SC Demibold"),local(FZLTZHK--GBK1-0),local("Heiti SC Medium"),local("STHeitiSC-Medium"),local("Heiti SC"),local("Microsoft YaHei Bold"),local(MicrosoftYaHei-Bold),local("Microsoft YaHei"),local("Noto Sans CJK SC Bold"),local(NotoSansCJKsc-Bold),local("Noto Sans CJK SC"),local("Source Han Sans SC Bold"),local("SourceHanSansSC-Bold"),local("Source Han Sans CN Bold"),local("SourceHanSansCN-Bold"),local("Source Han Sans SC"),local("Source Han Sans CN")}@font-face{font-family:Han Heiti;src:local("Hiragino Sans GB"),local("Lantinghei TC Extralight"),local("Lantinghei SC Extralight"),local(FZLTXHB--B51-0),local(FZLTZHK--GBK1-0),local(".PingFang SC Light"),local(".PingFang TC Light"),local(".PingFang-SC-Light"),local(".PingFang-TC-Light"),local(".PingFang SC"),local(".PingFang TC"),local("Heiti SC Light"),local("STHeitiSC-Light"),local("Heiti SC"),local("Heiti TC Light"),local("STHeitiTC-Light"),local("Heiti TC"),local("Microsoft Yahei"),local("Microsoft Jhenghei"),local("Noto Sans CJK KR"),local("Noto Sans CJK JP"),local("Noto Sans CJK SC"),local("Noto Sans CJK TC"),local("Source Han Sans K"),local("Source Han Sans KR"),local("Source Han Sans JP"),local("Source Han Sans CN"),local("Source Han Sans HK"),local("Source Han Sans TW"),local("Source Han Sans TWHK"),local("Droid Sans Fallback");unicode-range:U+270c}@font-face{font-family:Han Heiti;font-weight:600;src:local("Hiragino Sans GB W6"),local(HiraginoSansGB-W6),local("Lantinghei TC Demibold"),local("Lantinghei SC Demibold"),local(FZLTZHB--B51-0),local(FZLTZHK--GBK1-0),local(".PingFang-SC-Semibold"),local(".PingFang-TC-Semibold"),local("Heiti SC Medium"),local("STHeitiSC-Medium"),local("Heiti SC"),local("Heiti TC Medium"),local("STHeitiTC-Medium"),local("Heiti TC"),local("Microsoft YaHei Bold"),local("Microsoft Jhenghei Bold"),local(MicrosoftYaHei-Bold),local(MicrosoftJhengHeiBold),local("Microsoft YaHei"),local("Microsoft Jhenghei"),local("Noto Sans CJK KR Bold"),local("Noto Sans CJK JP Bold"),local("Noto Sans CJK SC Bold"),local("Noto Sans CJK TC Bold"),local(NotoSansCJKkr-Bold),local(NotoSansCJKjp-Bold),local(NotoSansCJKsc-Bold),local(NotoSansCJKtc-Bold),local("Source Han Sans K Bold"),local(SourceHanSansK-Bold),local("Source Han Sans K"),local("Source Han Sans KR Bold"),local("Source Han Sans JP Bold"),local("Source Han Sans CN Bold"),local("Source Han Sans HK Bold"),local("Source Han Sans TW Bold"),local("Source Han Sans TWHK Bold"),local("SourceHanSansKR-Bold"),local("SourceHanSansJP-Bold"),local("SourceHanSansCN-Bold"),local("SourceHanSansHK-Bold"),local("SourceHanSansTW-Bold"),local("SourceHanSansTWHK-Bold"),local("Source Han Sans KR"),local("Source Han Sans CN"),local("Source Han Sans HK"),local("Source Han Sans TW"),local("Source Han Sans TWHK");unicode-range:U+270c}@font-face{font-family:Han Songti;src:local("Songti SC Regular"),local(STSongti-SC-Regular),local("Songti SC"),local("Songti TC Regular"),local(STSongti-TC-Regular),local("Songti TC"),local(STSong),local("Lisong Pro"),local(SimSun),local(PMingLiU)}@font-face{unicode-range:U+4e00-9fff,U+3400-4db5,U+20000-2a6d6,U+2a700-2b734,U+2b740-2b81d,U+fa0e-fa0f,U+fa11,U+fa13-fa14,U+fa1f,U+fa21,U+fa23,U+fa24,U+fa27-fa29,U+3040-309f,U+30a0-30ff,U+3099-309e,U+ff66-ff9f,U+3007,U+31c0-31e3,U+2f00-2fd5,U+2e80-2ef3;font-family:Han Songti;src:local(YuMincho),local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("MS Mincho")}@font-face{font-family:Han Songti CNS;src:local("Songti TC Regular"),local(STSongti-TC-Regular),local("Songti TC"),local("Lisong Pro"),local("Songti SC Regular"),local(STSongti-SC-Regular),local("Songti SC"),local(STSong),local(PMingLiU),local(SimSun)}@font-face{font-family:Han Songti GB;src:local("Songti SC Regular"),local(STSongti-SC-Regular),local("Songti SC"),local(STSong),local(SimSun),local(PMingLiU)}@font-face{font-family:Han Songti;font-weight:600;src:local("STSongti SC Bold"),local("STSongti TC Bold"),local(STSongti-SC-Bold),local(STSongti-TC-Bold),local("STSongti SC"),local("STSongti TC")}@font-face{unicode-range:U+4e00-9fff,U+3400-4db5,U+20000-2a6d6,U+2a700-2b734,U+2b740-2b81d,U+fa0e-fa0f,U+fa11,U+fa13-fa14,U+fa1f,U+fa21,U+fa23,U+fa24,U+fa27-fa29,U+3040-309f,U+30a0-30ff,U+3099-309e,U+ff66-ff9f,U+3007,U+31c0-31e3,U+2f00-2fd5,U+2e80-2ef3;font-family:Han Songti;font-weight:600;src:local("YuMincho Demibold"),local("Hiragino Mincho ProN W6"),local("Hiragino Mincho Pro W6"),local(YuMin-Demibold),local(HiraMinProN-W6),local(HiraMinPro-W6),local(YuMincho),local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro")}@font-face{font-family:Han Songti CNS;font-weight:600;src:local("STSongti TC Bold"),local("STSongti SC Bold"),local(STSongti-TC-Bold),local(STSongti-SC-Bold),local("STSongti TC"),local("STSongti SC")}@font-face{font-family:Han Songti GB;font-weight:600;src:local("STSongti SC Bold"),local(STSongti-SC-Bold),local("STSongti SC")}@font-face{font-family:Han Songti;src:local("Songti SC Regular"),local(STSongti-SC-Regular),local("Songti SC"),local("Songti TC Regular"),local(STSongti-TC-Regular),local("Songti TC"),local(STSongti),local("Lisong Pro"),local("MS Mincho"),local(SimSun),local(PMingLiU);unicode-range:U+270c}@font-face{font-family:Han Songti;font-weight:600;src:local("Songti TC Bold"),local("Songti SC Bold"),local(STSongti-TC-Bold),local(STSongti-SC-Bold),local("Songti TC"),local("Songti SC");unicode-range:U+270c}@font-face{font-family:Han Songti CNS;src:local("Songti TC Regular"),local("Lisong Pro"),local("Songti TC"),local("Songti SC Regular"),local(STSong),local("Songti SC"),local("MS Mincho"),local(PMingLiU),local(SimSun);unicode-range:U+270c}@font-face{font-family:Han Songti CNS;font-weight:600;src:local("Songti TC Bold"),local("Songti SC Bold"),local(STSongti-TC-Bold),local(STSongti-SC-Bold),local("Songti TC"),local("Songti SC");unicode-range:U+270c}@font-face{font-family:Han Songti GB;src:local("Songti SC"),local(STSong),local(SimSun);unicode-range:U+270c}@font-face{font-family:Han Songti GB;font-weight:600;src:local("Songti SC Bold"),local(STSongti-SC-Bold),local("Songti SC");unicode-range:U+270c}@font-face{font-family:cursive;src:local("Kaiti TC Regular"),local(STKaiTi-TC-Regular),local("Kaiti TC"),local("Kaiti SC"),local(STKaiti),local(BiauKai),local("\6A19\6977\9AD4"),local(DFKaiShu-SB-Estd-BF),local(Kaiti),local(DFKai-SB)}@font-face{unicode-range:U+4e00-9fff,U+3400-4db5,U+20000-2a6d6,U+2a700-2b734,U+2b740-2b81d,U+fa0e-fa0f,U+fa11,U+fa13-fa14,U+fa1f,U+fa21,U+fa23,U+fa24,U+fa27-fa29,U+3040-309f,U+30a0-30ff,U+3099-309e,U+ff66-ff9f,U+3007,U+31c0-31e3,U+2f00-2fd5,U+2e80-2ef3;font-family:Han Kaiti;src:local("Kaiti TC Regular"),local(STKaiTi-TC-Regular),local("Kaiti TC"),local("Kaiti SC"),local(STKaiti),local(BiauKai),local("\6A19\6977\9AD4"),local(DFKaiShu-SB-Estd-BF),local(Kaiti),local(DFKai-SB)}@font-face{unicode-range:U+4e00-9fff,U+3400-4db5,U+20000-2a6d6,U+2a700-2b734,U+2b740-2b81d,U+fa0e-fa0f,U+fa11,U+fa13-fa14,U+fa1f,U+fa21,U+fa23,U+fa24,U+fa27-fa29,U+3040-309f,U+30a0-30ff,U+3099-309e,U+ff66-ff9f,U+3007,U+31c0-31e3,U+2f00-2fd5,U+2e80-2ef3;font-family:Han Kaiti CNS;src:local(BiauKai),local("\6A19\6977\9AD4"),local(DFKaiShu-SB-Estd-BF),local("Kaiti TC Regular"),local(STKaiTi-TC-Regular),local("Kaiti TC")}@font-face{unicode-range:U+4e00-9fff,U+3400-4db5,U+20000-2a6d6,U+2a700-2b734,U+2b740-2b81d,U+fa0e-fa0f,U+fa11,U+fa13-fa14,U+fa1f,U+fa21,U+fa23,U+fa24,U+fa27-fa29,U+3040-309f,U+30a0-30ff,U+3099-309e,U+ff66-ff9f,U+3007,U+31c0-31e3,U+2f00-2fd5,U+2e80-2ef3;font-family:Han Kaiti GB;src:local("Kaiti SC Regular"),local(STKaiTi-SC-Regular),local("Kaiti SC"),local(STKaiti),local(Kai),local(Kaiti),local(DFKai-SB)}@font-face{font-family:cursive;font-weight:600;src:local("Kaiti TC Bold"),local(STKaiTi-TC-Bold),local("Kaiti SC Bold"),local(STKaiti-SC-Bold),local("Kaiti TC"),local("Kaiti SC")}@font-face{font-family:Han Kaiti;font-weight:600;src:local("Kaiti TC Bold"),local(STKaiTi-TC-Bold "),\A       local(" Kaiti SC Bold "),\A       local(STKaiti-SC-Bold),\A       local(" Kaiti TC "),\A       local(" Kaiti SC ")\A     ;\A}\A   \A// 2\A@font-face {\A     font-family: " Han Kaiti CNS ";\A     font-weight: 600;\A     src:\A       local(" Kaiti TC Bold "),\A       local(STKaiTi-TC-Bold"),local("Kaiti TC")}@font-face{font-family:Han Kaiti GB;font-weight:600;src:local("Kaiti SC Bold"),local(STKaiti-SC-Bold)}@font-face{unicode-range:U+4e00-9fff,U+3400-4db5,U+20000-2a6d6,U+2a700-2b734,U+2b740-2b81d,U+fa0e-fa0f,U+fa11,U+fa13-fa14,U+fa1f,U+fa21,U+fa23,U+fa24,U+fa27-fa29,U+3040-309f,U+30a0-30ff,U+3099-309e,U+ff66-ff9f,U+3007,U+31c0-31e3,U+2f00-2fd5,U+2e80-2ef3;font-family:Han Fangsong;src:local(STFangsong),local(FangSong)}@font-face{unicode-range:U+4e00-9fff,U+3400-4db5,U+20000-2a6d6,U+2a700-2b734,U+2b740-2b81d,U+fa0e-fa0f,U+fa11,U+fa13-fa14,U+fa1f,U+fa21,U+fa23,U+fa24,U+fa27-fa29,U+3040-309f,U+30a0-30ff,U+3099-309e,U+ff66-ff9f,U+3007,U+31c0-31e3,U+2f00-2fd5,U+2e80-2ef3;font-family:Han Fangsong CNS;src:local(STFangsong),local(FangSong)}@font-face{unicode-range:U+4e00-9fff,U+3400-4db5,U+20000-2a6d6,U+2a700-2b734,U+2b740-2b81d,U+fa0e-fa0f,U+fa11,U+fa13-fa14,U+fa1f,U+fa21,U+fa23,U+fa24,U+fa27-fa29,U+3040-309f,U+30a0-30ff,U+3099-309e,U+ff66-ff9f,U+3007,U+31c0-31e3,U+2f00-2fd5,U+2e80-2ef3;font-family:Han Fangsong GB;src:local(STFangsong),local(FangSong)}@font-face{font-family:Biaodian Sans;src:local("Hiragino Sans GB"),local("Heiti SC"),local(STHeiti),local("MS Gothic"),local(SimSun);unicode-range:U+ff0e}@font-face{font-family:"Biaodian Serif";src:local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("Songti SC"),local(STSong),local(SimSun);unicode-range:U+ff0e}@font-face{font-family:Biaodian Pro Sans;src:local("Hiragino Sans GB"),local("Heiti SC"),local(STHeiti),local("MS Gothic"),local(SimSun);unicode-range:U+ff0e}@font-face{font-family:"Biaodian Pro Serif";src:local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("Songti SC"),local(STSong),local(SimSun);unicode-range:U+ff0e}@font-face{font-family:Biaodian Pro Sans CNS;src:local("Hiragino Sans GB"),local("Heiti SC"),local(STHeiti),local("MS Gothic"),local(SimSun);unicode-range:U+ff0e}@font-face{font-family:"Biaodian Pro Serif CNS";src:local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("Songti SC"),local(STSong),local(SimSun);unicode-range:U+ff0e}@font-face{font-family:Biaodian Pro Sans GB;src:local("Hiragino Sans GB"),local("Heiti SC"),local(STHeiti),local("MS Gothic"),local(SimSun);unicode-range:U+ff0e}@font-face{font-family:"Biaodian Pro Serif GB";src:local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("Songti SC"),local(STSong),local(SimSun);unicode-range:U+ff0e}@font-face{font-family:Biaodian Sans;src:local("Hiragino Sans GB"),local("Heiti SC"),local(STHeiti),local(SimSun);unicode-range:U+00b7}@font-face{font-family:"Biaodian Serif";src:local("Songti SC"),local(STSong),local("Heiti SC"),local(SimSun);unicode-range:U+00b7}@font-face{font-family:Biaodian Pro Sans;src:local("Hiragino Sans GB"),local("Heiti SC"),local(STHeiti),local(SimSun);unicode-range:U+00b7}@font-face{font-family:"Biaodian Pro Serif";src:local("Songti SC"),local(STSong),local("Heiti SC"),local(SimSun);unicode-range:U+00b7}@font-face{font-family:Biaodian Pro Sans CNS;src:local("Hiragino Sans GB"),local("Heiti SC"),local(STHeiti),local(SimSun);unicode-range:U+00b7}@font-face{font-family:"Biaodian Pro Serif CNS";src:local("Songti SC"),local(STSong),local("Heiti SC"),local(SimSun);unicode-range:U+00b7}@font-face{font-family:Biaodian Pro Sans GB;src:local("Hiragino Sans GB"),local("Heiti SC"),local(STHeiti),local(SimSun);unicode-range:U+00b7}@font-face{font-family:"Biaodian Pro Serif GB";src:local("Songti SC"),local(STSong),local("Heiti SC"),local(SimSun);unicode-range:U+00b7}@font-face{font-family:Biaodian Sans;src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype"),local("Hiragino Sans GB"),local("Hiragino Kaku Gothic ProN"),local("Hiragino Kaku Gothic Pro"),local("Microsoft Yahei"),local(SimSun);unicode-range:U+2014}@font-face{font-family:"Biaodian Serif";src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype"),local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("Songti SC"),local(STSong),local("Microsoft Yahei"),local(SimSun);unicode-range:U+2014}@font-face{font-family:Yakumono Sans;src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype"),local("Hiragino Kaku Gothic ProN"),local("Hiragino Kaku Gothic Pro"),local("Arial Unicode MS"),local("MS Gothic");unicode-range:U+2014}@font-face{font-family:"Yakumono Serif";src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype"),local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("MS Mincho"),local("Microsoft Yahei");unicode-range:U+2014}@font-face{font-family:Biaodian Pro Sans;src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype"),local("Hiragino Sans GB"),local("Hiragino Kaku Gothic ProN"),local("Hiragino Kaku Gothic Pro"),local("Microsoft Yahei"),local(SimSun);unicode-range:U+2014}@font-face{font-family:"Biaodian Pro Serif";src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype"),local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("Songti SC"),local(STSong),local("Microsoft Yahei"),local(SimSun);unicode-range:U+2014}@font-face{font-family:Biaodian Pro Sans CNS;src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype"),local("Hiragino Sans GB"),local("Hiragino Kaku Gothic ProN"),local("Hiragino Kaku Gothic Pro"),local("Microsoft Yahei"),local(SimSun);unicode-range:U+2014}@font-face{font-family:"Biaodian Pro Serif CNS";src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype"),local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("Songti SC"),local(STSong),local("Microsoft Yahei"),local(SimSun);unicode-range:U+2014}@font-face{font-family:Biaodian Pro Sans GB;src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype"),local("Hiragino Sans GB"),local("Hiragino Kaku Gothic ProN"),local("Hiragino Kaku Gothic Pro"),local("Microsoft Yahei"),local(SimSun);unicode-range:U+2014}@font-face{font-family:"Biaodian Pro Serif GB";src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype"),local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("Songti SC"),local(STSong),local("Microsoft Yahei"),local(SimSun);unicode-range:U+2014}@font-face{font-family:Biaodian Sans;src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype"),local("Hiragino Sans GB"),local("Hiragino Kaku Gothic ProN"),local("Hiragino Kaku Gothic Pro"),local(Meiryo),local("MS Gothic"),local(SimSun),local(PMingLiU);unicode-range:U+2026}@font-face{font-family:"Biaodian Serif";src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype"),local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("Songti SC"),local("MS Mincho"),local(SimSun),local(PMingLiU);unicode-range:U+2026}@font-face{font-family:Yakumono Sans;src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype"),local("Hiragino Kaku Gothic ProN"),local("Hiragino Kaku Gothic Pro"),local(Meiryo),local("MS Gothic");unicode-range:U+2026}@font-face{font-family:"Yakumono Serif";src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype"),local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("MS Mincho");unicode-range:U+2026}@font-face{font-family:Biaodian Pro Sans;src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype"),local("Hiragino Sans GB"),local("Hiragino Kaku Gothic ProN"),local("Hiragino Kaku Gothic Pro"),local(SimSun),local(PMingLiU);unicode-range:U+2026}@font-face{font-family:"Biaodian Pro Serif";src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype"),local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("Songti SC"),local(SimSun),local(PMingLiU);unicode-range:U+2026}@font-face{font-family:Biaodian Pro Sans CNS;src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype"),local("Hiragino Sans GB"),local("Hiragino Kaku Gothic ProN"),local("Hiragino Kaku Gothic Pro"),local(SimSun),local(PMingLiU);unicode-range:U+2026}@font-face{font-family:"Biaodian Pro Serif CNS";src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype"),local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("Songti SC"),local(STSongti),local(SimSun),local(PMingLiU);unicode-range:U+2026}@font-face{font-family:Biaodian Pro Sans GB;src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype"),local("Hiragino Sans GB"),local("Hiragino Kaku Gothic ProN"),local("Hiragino Kaku Gothic Pro"),local(SimSun),local(PMingLiU);unicode-range:U+2026}@font-face{font-family:"Biaodian Pro Serif GB";src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype"),local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("Songti SC"),local(STSongti),local(SimSun),local(PMingLiU);unicode-range:U+2026}@font-face{font-family:Biaodian Pro Sans GB;src:local("Hiragino Sans GB"),local("Heiti SC"),local(STHeiti),local(SimSun),local(PMingLiU);unicode-range:U+201c-201d,U+2018-2019}@font-face{font-family:Biaodian Pro Sans GB;font-weight:700;src:local("Hiragino Sans GB"),local("Heiti SC"),local(STHeiti),local(SimSun),local(PMingLiU);unicode-range:U+201c-201d,U+2018-2019}@font-face{font-family:"Biaodian Pro Serif GB";src:local("Lisong Pro"),local("Heiti SC"),local(STHeiti),local(SimSun),local(PMingLiU);unicode-range:U+201c-201d,U+2018-2019}@font-face{font-family:"Biaodian Pro Serif GB";font-weight:700;src:local("Lisong Pro"),local("Heiti SC"),local(STHeiti),local(SimSun),local(PMingLiU);unicode-range:U+201c-201d,U+2018-2019}@font-face{font-family:Biaodian Sans;src:local(Georgia),local("Times New Roman"),local(Arial),local("Droid Sans Fallback");unicode-range:U+25cf}@font-face{font-family:"Biaodian Serif";src:local(Georgia),local("Times New Roman"),local(Arial),local("Droid Sans Fallback");unicode-range:U+25cf}@font-face{font-family:Biaodian Pro Sans;src:local(Georgia),local("Times New Roman"),local(Arial),local("Droid Sans Fallback");unicode-range:U+25cf}@font-face{font-family:"Biaodian Pro Serif";src:local(Georgia),local("Times New Roman"),local(Arial),local("Droid Sans Fallback");unicode-range:U+25cf}@font-face{font-family:Biaodian Pro Sans CNS;src:local(Georgia),local("Times New Roman"),local(Arial),local("Droid Sans Fallback");unicode-range:U+25cf}@font-face{font-family:"Biaodian Pro Serif CNS";src:local(Georgia),local("Times New Roman"),local(Arial),local("Droid Sans Fallback");unicode-range:U+25cf}@font-face{font-family:Biaodian Pro Sans GB;src:local(Georgia),local("Times New Roman"),local(Arial),local("Droid Sans Fallback");unicode-range:U+25cf}@font-face{font-family:"Biaodian Pro Serif GB";src:local(Georgia),local("Times New Roman"),local(Arial),local("Droid Sans Fallback");unicode-range:U+25cf}@font-face{font-family:Biaodian Pro Sans;src:local("Hiragino Kaku Gothic ProN"),local("Hiragino Kaku Gothic Pro"),local("MS Gothic");unicode-range:U+3002,U+ff0c,U+3001,U+ff1b,U+ff1a,U+ff1f,U+ff01,U+ff0d,U+ff0f,U+ff3c}@font-face{font-family:"Biaodian Pro Serif";src:local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("MS Mincho");unicode-range:U+3002,U+ff0c,U+3001,U+ff1b,U+ff1a,U+ff1f,U+ff01,U+ff0d,U+ff0f,U+ff3c}@font-face{font-family:Biaodian Pro Sans CNS;src:local("Heiti TC"),local("Lihei Pro"),local("Microsoft Jhenghei"),local(PMingLiU);unicode-range:U+3002,U+ff0c,U+3001}@font-face{font-family:Biaodian Pro Sans CNS;src:local("Hiragino Kaku Gothic ProN"),local("Hiragino Kaku Gothic Pro"),local("Heiti TC"),local("Lihei Pro"),local("Microsoft Jhenghei"),local(PMingLiU),local("MS Gothic");unicode-range:U+ff1b,U+ff1a,U+ff1f,U+ff01}@font-face{font-family:Biaodian Pro Sans CNS;src:local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("MS Mincho");unicode-range:U+ff0d,U+ff0f,U+ff3c}@font-face{font-family:"Biaodian Pro Serif CNS";src:local(STSongti-TC-Regular),local("Lisong Pro"),local("Heiti TC"),local(PMingLiU);unicode-range:U+3002,U+ff0c,U+3001}@font-face{font-family:"Biaodian Pro Serif CNS";src:local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local(PMingLiU),local("MS Mincho");unicode-range:U+ff1b,U+ff1a,U+ff1f,U+ff01,U+ff0d,U+ff0f,U+ff3c}@font-face{font-family:Biaodian Pro Sans GB;src:local("Hiragino Sans GB"),local("Heiti SC"),local(STHeiti),local("Hiragino Kaku Gothic ProN"),local("Hiragino Kaku Gothic Pro"),local(SimSun),local("MS Gothic");unicode-range:U+3002,U+ff0c,U+3001,U+ff1b,U+ff1a,U+ff1f,U+ff01,U+ff0d,U+ff0f,U+ff3c}@font-face{font-family:"Biaodian Pro Serif GB";src:local("Songti SC"),local(STSongti),local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("Hiragino Sans GB"),local("Heiti SC"),local(STHeiti),local(SimSun),local("MS Mincho");unicode-range:U+3002,U+ff0c,U+3001,U+ff1b,U+ff1a,U+ff1f,U+ff01}@font-face{font-family:"Biaodian Pro Serif GB";src:local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local(PMingLiU),local("MS Mincho");unicode-range:U+ff0d,U+ff0f,U+ff3c}@font-face{font-family:Biaodian Pro Sans;src:local("Hiragino Kaku Gothic ProN"),local("Hiragino Kaku Gothic Pro"),local("Yu Gothic"),local(YuGothic),local(SimSun),local(PMingLiU);unicode-range:U+300c-300f,U+300a-300b,U+3008-3009,U+ff08-ff09,U+3014-3015}@font-face{font-family:"Biaodian Pro Serif";src:local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("Yu Mincho"),local(YuMincho),local(SimSun),local(PMingLiU);unicode-range:U+300c-300f,U+300a-300b,U+3008-3009,U+ff08-ff09,U+3014-3015}@font-face{font-family:Biaodian Pro Sans CNS;src:local("Hiragino Kaku Gothic ProN"),local("Hiragino Kaku Gothic Pro"),local("Yu Gothic"),local(YuGothic),local(SimSun),local(PMingLiU);unicode-range:U+300c-300f,U+300a-300b,U+3008-3009,U+ff08-ff09,U+3014-3015}@font-face{font-family:"Biaodian Pro Serif CNS";src:local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("Yu Mincho"),local(YuMincho),local(SimSun),local(PMingLiU);unicode-range:U+300c-300f,U+300a-300b,U+3008-3009,U+ff08-ff09,U+3014-3015}@font-face{font-family:Biaodian Pro Sans GB;src:local("Hiragino Kaku Gothic ProN"),local("Hiragino Kaku Gothic Pro"),local("Yu Gothic"),local(YuGothic),local(SimSun),local(PMingLiU);unicode-range:U+300c-300f,U+300a-300b,U+3008-3009,U+ff08-ff09,U+3014-3015}@font-face{font-family:"Biaodian Pro Serif GB";src:local("Hiragino Mincho ProN"),local("Hiragino Mincho Pro"),local("Yu Mincho"),local(YuMincho),local(SimSun),local(PMingLiU);unicode-range:U+300c-300f,U+300a-300b,U+3008-3009,U+ff08-ff09,U+3014-3015}@font-face{font-family:Biaodian Basic;src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype");unicode-range:U+2014,U+2026,U+00b7}@font-face{font-family:Biaodian Basic;font-weight:700;src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype");unicode-range:U+2014,U+2026,U+00b7}@font-face{font-family:Biaodian Sans;font-weight:700;src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype");unicode-range:U+2014,U+2026,U+00b7}@font-face{font-family:Biaodian Pro Sans;font-weight:700;src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype");unicode-range:U+2014,U+2026,U+00b7}@font-face{font-family:Biaodian Pro Sans CNS;font-weight:700;src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype");unicode-range:U+2014,U+2026,U+00b7}@font-face{font-family:Biaodian Pro Sans GB;font-weight:700;src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype");unicode-range:U+2014,U+2026,U+00b7}@font-face{font-family:"Biaodian Pro Serif";font-weight:700;src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype");unicode-range:U+2014,U+2026,U+00b7}@font-face{font-family:"Biaodian Pro Serif CNS";font-weight:700;src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype");unicode-range:U+2014,U+2026,U+00b7}@font-face{font-family:"Biaodian Pro Serif GB";font-weight:700;src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype");unicode-range:U+2014,U+2026,U+00b7}@font-face{font-family:"Latin Italic Serif";src:local("Georgia Italic"),local("Times New Roman Italic"),local(Georgia-Italic),local(TimesNewRomanPS-ItalicMT),local(Times-Italic)}@font-face{font-family:"Latin Italic Serif";font-weight:700;src:local("Georgia Bold Italic"),local("Times New Roman Bold Italic"),local(Georgia-BoldItalic),local(TimesNewRomanPS-BoldItalicMT),local(Times-Italic)}@font-face{font-family:Latin Italic Sans;src:local("Helvetica Neue Italic"),local("Helvetica Oblique"),local("Arial Italic"),local(HelveticaNeue-Italic),local(Helvetica-LightOblique),local(Arial-ItalicMT)}@font-face{font-family:Latin Italic Sans;font-weight:700;src:local("Helvetica Neue Bold Italic"),local("Helvetica Bold Oblique"),local("Arial Bold Italic"),local(HelveticaNeue-BoldItalic),local(Helvetica-BoldOblique),local(Arial-BoldItalicMT)}@font-face{unicode-range:U+0030-0039;font-family:Numeral TF Sans;src:local(Skia),local("Neutraface 2 Text"),local(Candara),local(Corbel)}@font-face{unicode-range:U+0030-0039;font-family:"Numeral TF Serif";src:local(Georgia),local("Hoefler Text"),local("Big Caslon")}@font-face{unicode-range:U+0030-0039;font-family:"Numeral TF Italic Serif";src:local("Georgia Italic"),local("Hoefler Text Italic"),local(Georgia-Italic),local(HoeflerText-Italic)}@font-face{unicode-range:U+0030-0039;font-family:Numeral LF Sans;src:local("Helvetica Neue"),local(Helvetica),local(Arial)}@font-face{unicode-range:U+0030-0039;font-family:Numeral LF Italic Sans;src:local("Helvetica Neue Italic"),local("Helvetica Oblique"),local("Arial Italic"),local(HelveticaNeue-Italic),local(Helvetica-LightOblique),local(Arial-ItalicMT)}@font-face{unicode-range:U+0030-0039;font-family:Numeral LF Italic Sans;font-weight:700;src:local("Helvetica Neue Bold Italic"),local("Helvetica Bold Oblique"),local("Arial Bold Italic"),local(HelveticaNeue-BoldItalic),local(Helvetica-BoldOblique),local(Arial-BoldItalicMT)}@font-face{unicode-range:U+0030-0039;font-family:"Numeral LF Serif";src:local(Palatino),local("Palatino Linotype"),local("Times New Roman")}@font-face{unicode-range:U+0030-0039;font-family:"Numeral LF Italic Serif";src:local("Palatino Italic"),local("Palatino Italic Linotype"),local("Times New Roman Italic"),local(Palatino-Italic),local(Palatino-Italic-Linotype),local(TimesNewRomanPS-ItalicMT)}@font-face{unicode-range:U+0030-0039;font-family:"Numeral LF Italic Serif";font-weight:700;src:local("Palatino Bold Italic"),local("Palatino Bold Italic Linotype"),local("Times New Roman Bold Italic"),local(Palatino-BoldItalic),local(Palatino-BoldItalic-Linotype),local(TimesNewRomanPS-BoldItalicMT)}@font-face{font-family:Numeral TF Sans;src:local(lying-to-firefox);unicode-range:U+270c}@font-face{font-family:"Numeral TF Serif";src:local(lying-to-firefox);unicode-range:U+270c}@font-face{font-family:"Numeral TF Italic Serif";src:local(lying-to-firefox);unicode-range:U+270c}@font-face{font-family:Numeral LF Sans;src:local(lying-to-firefox);unicode-range:U+270c}@font-face{font-family:Numeral LF Italic Sans;src:local(lying-to-firefox);unicode-range:U+270c}@font-face{font-family:Numeral LF Italic Sans;font-weight:700;src:local(lying-to-firefox);unicode-range:U+270c}@font-face{font-family:"Numeral LF Serif";src:local(lying-to-firefox);unicode-range:U+270c}@font-face{font-family:"Numeral LF Italic Serif";src:local(lying-to-firefox);unicode-range:U+270c}@font-face{font-family:"Numeral LF Italic Serif";font-weight:700;src:local(lying-to-firefox);unicode-range:U+270c}@font-face{src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype");unicode-range:U+3105-312d,U+31a0-31ba,U+02d9,U+02ca,U+02c5,U+02c7,U+02cb,U+02ea-02eb,U+030d,U+0358,U+f31b4-f31b7,U+f0061,U+f0065,U+f0069,U+f006f,U+f0075;font-family:Zhuyin Kaiti}@font-face{unicode-range:U+3105-312d,U+31a0-31ba,U+02d9,U+02ca,U+02c5,U+02c7,U+02cb,U+02ea-02eb,U+030d,U+0358,U+f31b4-f31b7,U+f0061,U+f0065,U+f0069,U+f006f,U+f0075;font-family:Zhuyin Heiti;src:local("Hiragino Sans GB"),local("Heiti TC"),local("Microsoft Jhenghei"),url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype")}@font-face{font-family:Zhuyin Heiti;src:local("Heiti TC"),local("Microsoft Jhenghei"),url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype");unicode-range:U+3127}@font-face{src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype");font-family:Zhuyin Heiti;unicode-range:U+02d9,U+02ca,U+02c5,U+02c7,U+02cb,U+02ea-02eb,U+31b4,U+31b5,U+31b6,U+31b7,U+030d,U+0358,U+f31b4-f31b7,U+f0061,U+f0065,U+f0069,U+f006f,U+f0075}@font-face{src:url(/static/han-e841c6b547bc06a06f60f4de52bf906e.woff) format("woff"),url(/static/han-202673272279abf200bd0e6ef6a96935.otf) format("opentype");font-family:Romanization Sans;unicode-range:U+030d,U+0358,U+f31b4-f31b7,U+f0061,U+f0065,U+f0069,U+f006f,U+f0075}article strong:lang(ja-Latn),article strong :lang(ja-Latn),article strong:lang(zh-Latn),article strong :lang(zh-Latn),article strong:not(:lang(zh)):not(:lang(ja)),article strong :not(:lang(zh)):not(:lang(ja)),html:lang(ja-Latn),html :lang(ja-Latn),html:lang(zh-Latn),html :lang(zh-Latn),html:not(:lang(zh)):not(:lang(ja)),html :not(:lang(zh)):not(:lang(ja)){font-family:PT Mono,monospace,Han Heiti,sans-serif}[lang*=Hant],[lang=zh-HK],[lang=zh-TW],[lang^=zh],article strong:lang(zh),article strong:lang(zh-Hant),html:lang(zh),html:lang(zh-Hant){font-family:Biaodian Pro Sans CNS,PT Mono,monospace,Zhuyin Heiti,Han Heiti,sans-serif}.no-unicoderange [lang*=Hant],.no-unicoderange [lang=zh-HK],.no-unicoderange [lang=zh-TW],.no-unicoderange [lang^=zh],.no-unicoderange article strong:lang(zh),.no-unicoderange article strong:lang(zh-Hant),html.no-unicoderange:lang(zh),html.no-unicoderange:lang(zh-Hant){font-family:PT Mono,monospace,Han Heiti,sans-serif}[lang*=Hans],[lang=zh-CN],article strong:lang(zh-CN),article strong:lang(zh-Hans),html:lang(zh-CN),html:lang(zh-Hans){font-family:Biaodian Pro Sans GB,PT Mono,monospace,Han Heiti GB,sans-serif}.no-unicoderange [lang*=Hans],.no-unicoderange [lang=zh-CN],.no-unicoderange article strong:lang(zh-CN),.no-unicoderange article strong:lang(zh-Hans),html.no-unicoderange:lang(zh-CN),html.no-unicoderange:lang(zh-Hans){font-family:PT Mono,monospace,Han Heiti GB,sans-serif}[lang^=ja],article strong:lang(ja),html:lang(ja){font-family:Yakumono Sans,PT Mono,monospace,sans-serif}.no-unicoderange [lang^=ja],.no-unicoderange article strong:lang(ja),html.no-unicoderange:lang(ja){font-family:PT Mono,monospace,sans-serif}article blockquote i:lang(ja-Latn),article blockquote i :lang(ja-Latn),article blockquote i:lang(zh-Latn),article blockquote i :lang(zh-Latn),article blockquote i:not(:lang(zh)):not(:lang(ja)),article blockquote i :not(:lang(zh)):not(:lang(ja)),article blockquote var:lang(ja-Latn),article blockquote var :lang(ja-Latn),article blockquote var:lang(zh-Latn),article blockquote var :lang(zh-Latn),article blockquote var:not(:lang(zh)):not(:lang(ja)),article blockquote var :not(:lang(zh)):not(:lang(ja)){font-family:Latin Italic Sans,PT Mono,monospace,Han Heiti,sans-serif}article blockquote i:lang(zh),article blockquote i:lang(zh-Hant),article blockquote var:lang(zh),article blockquote var:lang(zh-Hant){font-family:Biaodian Pro Sans CNS,Latin Italic Sans,PT Mono,monospace,Zhuyin Heiti,Han Heiti,sans-serif}.no-unicoderange article blockquote i:lang(zh),.no-unicoderange article blockquote i:lang(zh-Hant),.no-unicoderange article blockquote var:lang(zh),.no-unicoderange article blockquote var:lang(zh-Hant){font-family:Latin Italic Sans,PT Mono,monospace,Han Heiti,sans-serif}article blockquote i:lang(zh-CN),article blockquote i:lang(zh-Hans),article blockquote var:lang(zh-CN),article blockquote var:lang(zh-Hans){font-family:Biaodian Pro Sans GB,Latin Italic Sans,PT Mono,monospace,Han Heiti GB,sans-serif}.no-unicoderange article blockquote i:lang(zh-CN),.no-unicoderange article blockquote i:lang(zh-Hans),.no-unicoderange article blockquote var:lang(zh-CN),.no-unicoderange article blockquote var:lang(zh-Hans){font-family:Latin Italic Sans,PT Mono,monospace,Han Heiti GB,sans-serif}article blockquote i:lang(ja),article blockquote var:lang(ja){font-family:Yakumono Sans,Latin Italic Sans,PT Mono,monospace,sans-serif}.no-unicoderange article blockquote i:lang(ja),.no-unicoderange article blockquote var:lang(ja){font-family:Latin Italic Sans,PT Mono,monospace,sans-serif}article figure blockquote:lang(ja-Latn),article figure blockquote :lang(ja-Latn),article figure blockquote:lang(zh-Latn),article figure blockquote :lang(zh-Latn),article figure blockquote:not(:lang(zh)):not(:lang(ja)),article figure blockquote :not(:lang(zh)):not(:lang(ja)),figure blockquote:lang(ja-Latn),figure blockquote :lang(ja-Latn),figure blockquote:lang(zh-Latn),figure blockquote :lang(zh-Latn),figure blockquote:not(:lang(zh)):not(:lang(ja)),figure blockquote :not(:lang(zh)):not(:lang(ja)){font-family:CELESTE,Georgia,Times New Roman,Han Songti,cursive,serif}article figure blockquote:lang(zh),article figure blockquote:lang(zh-Hant),figure blockquote:lang(zh),figure blockquote:lang(zh-Hant){font-family:"Biaodian Pro Serif CNS","Numeral LF Serif",CELESTE,Georgia,Times New Roman,Zhuyin Kaiti,Han Songti,serif}.no-unicoderange article figure blockquote:lang(zh),.no-unicoderange article figure blockquote:lang(zh-Hant),.no-unicoderange figure blockquote:lang(zh),.no-unicoderange figure blockquote:lang(zh-Hant){font-family:"Numeral LF Serif",CELESTE,Georgia,Times New Roman,Han Songti,serif}article figure blockquote:lang(zh-CN),article figure blockquote:lang(zh-Hans),figure blockquote:lang(zh-CN),figure blockquote:lang(zh-Hans){font-family:"Biaodian Pro Serif GB","Numeral LF Serif",CELESTE,Georgia,Times New Roman,Han Songti GB,serif}.no-unicoderange article figure blockquote:lang(zh-CN),.no-unicoderange article figure blockquote:lang(zh-Hans),.no-unicoderange figure blockquote:lang(zh-CN),.no-unicoderange figure blockquote:lang(zh-Hans){font-family:"Numeral LF Serif",CELESTE,Georgia,Times New Roman,Han Songti GB,serif}article figure blockquote:lang(ja),figure blockquote:lang(ja){font-family:"Yakumono Serif","Numeral LF Serif",CELESTE,Georgia,Times New Roman,serif}.no-unicoderange article figure blockquote:lang(ja),.no-unicoderange figure blockquote:lang(ja){font-family:"Numeral LF Serif",CELESTE,Georgia,Times New Roman,serif}article blockquote:lang(ja-Latn),article blockquote :lang(ja-Latn),article blockquote:lang(zh-Latn),article blockquote :lang(zh-Latn),article blockquote:not(:lang(zh)):not(:lang(ja)),article blockquote :not(:lang(zh)):not(:lang(ja)){font-family:CELESTE,Georgia,Times New Roman,Han Kaiti,cursive,serif}article blockquote:lang(zh),article blockquote:lang(zh-Hant){font-family:"Biaodian Pro Serif CNS","Numeral LF Serif",CELESTE,Georgia,Times New Roman,Zhuyin Kaiti,Han Kaiti,cursive,serif}.no-unicoderange article blockquote:lang(zh),.no-unicoderange article blockquote:lang(zh-Hant){font-family:"Numeral LF Serif",CELESTE,Georgia,Times New Roman,Han Kaiti,cursive,serif}article blockquote:lang(zh-CN),article blockquote:lang(zh-Hans){font-family:"Biaodian Pro Serif GB","Numeral LF Serif",CELESTE,Georgia,Times New Roman,Han Kaiti GB,cursive,serif}.no-unicoderange article blockquote:lang(zh-CN),.no-unicoderange article blockquote:lang(zh-Hans){font-family:"Numeral LF Serif",CELESTE,Georgia,Times New Roman,Han Kaiti GB,cursive,serif}article blockquote:lang(ja){font-family:"Yakumono Serif","Numeral LF Serif",CELESTE,Georgia,Times New Roman,cursive,serif}.no-unicoderange article blockquote:lang(ja){font-family:"Numeral LF Serif",CELESTE,Georgia,Times New Roman,cursive,serif}i:lang(ja-Latn),i :lang(ja-Latn),i:lang(zh-Latn),i :lang(zh-Latn),i:not(:lang(zh)):not(:lang(ja)),i :not(:lang(zh)):not(:lang(ja)),var:lang(ja-Latn),var :lang(ja-Latn),var:lang(zh-Latn),var :lang(zh-Latn),var:not(:lang(zh)):not(:lang(ja)),var :not(:lang(zh)):not(:lang(ja)){font-family:"Latin Italic Serif",CELESTE,Georgia,Times New Roman,Han Kaiti,cursive,serif}i:lang(zh),i:lang(zh-Hant),var:lang(zh),var:lang(zh-Hant){font-family:"Biaodian Pro Serif CNS","Numeral LF Italic Serif","Latin Italic Serif",CELESTE,Georgia,Times New Roman,Zhuyin Kaiti,Han Kaiti,cursive,serif}.no-unicoderange i:lang(zh),.no-unicoderange i:lang(zh-Hant),.no-unicoderange var:lang(zh),.no-unicoderange var:lang(zh-Hant){font-family:"Numeral LF Italic Serif","Latin Italic Serif",CELESTE,Georgia,Times New Roman,Han Kaiti,cursive,serif}i:lang(zh-CN),i:lang(zh-Hans),var:lang(zh-CN),var:lang(zh-Hans){font-family:"Biaodian Pro Serif GB","Numeral LF Italic Serif","Latin Italic Serif",CELESTE,Georgia,Times New Roman,Han Kaiti GB,cursive,serif}.no-unicoderange i:lang(zh-CN),.no-unicoderange i:lang(zh-Hans),.no-unicoderange var:lang(zh-CN),.no-unicoderange var:lang(zh-Hans){font-family:"Numeral LF Italic Serif","Latin Italic Serif",CELESTE,Georgia,Times New Roman,Han Kaiti GB,cursive,serif}i:lang(ja),var:lang(ja){font-family:"Yakumono Serif","Numeral LF Italic Serif","Latin Italic Serif",CELESTE,Georgia,Times New Roman,cursive,serif}.no-unicoderange i:lang(ja),.no-unicoderange var:lang(ja){font-family:"Numeral LF Italic Serif","Latin Italic Serif",CELESTE,Georgia,Times New Roman,cursive,serif}code:lang(ja-Latn),code :lang(ja-Latn),code:lang(zh-Latn),code :lang(zh-Latn),code:not(:lang(zh)):not(:lang(ja)),code :not(:lang(zh)):not(:lang(ja)),kbd:lang(ja-Latn),kbd :lang(ja-Latn),kbd:lang(zh-Latn),kbd :lang(zh-Latn),kbd:not(:lang(zh)):not(:lang(ja)),kbd :not(:lang(zh)):not(:lang(ja)),pre:lang(ja-Latn),pre :lang(ja-Latn),pre:lang(zh-Latn),pre :lang(zh-Latn),pre:not(:lang(zh)):not(:lang(ja)),pre :not(:lang(zh)):not(:lang(ja)),samp:lang(ja-Latn),samp :lang(ja-Latn),samp:lang(zh-Latn),samp :lang(zh-Latn),samp:not(:lang(zh)):not(:lang(ja)),samp :not(:lang(zh)):not(:lang(ja)){font-family:Menlo,Consolas,Courier,Han Heiti,monospace,monospace,sans-serif}code:lang(zh),code:lang(zh-Hant),kbd:lang(zh),kbd:lang(zh-Hant),pre:lang(zh),pre:lang(zh-Hant),samp:lang(zh),samp:lang(zh-Hant){font-family:Biaodian Pro Sans CNS,Menlo,Consolas,Courier,Zhuyin Heiti,Han Heiti,monospace,monospace,sans-serif}.no-unicoderange code:lang(zh),.no-unicoderange code:lang(zh-Hant),.no-unicoderange kbd:lang(zh),.no-unicoderange kbd:lang(zh-Hant),.no-unicoderange pre:lang(zh),.no-unicoderange pre:lang(zh-Hant),.no-unicoderange samp:lang(zh),.no-unicoderange samp:lang(zh-Hant){font-family:Menlo,Consolas,Courier,Han Heiti,monospace,monospace,sans-serif}code:lang(zh-CN),code:lang(zh-Hans),kbd:lang(zh-CN),kbd:lang(zh-Hans),pre:lang(zh-CN),pre:lang(zh-Hans),samp:lang(zh-CN),samp:lang(zh-Hans){font-family:Biaodian Pro Sans GB,Menlo,Consolas,Courier,Han Heiti GB,monospace,monospace,sans-serif}.no-unicoderange code:lang(zh-CN),.no-unicoderange code:lang(zh-Hans),.no-unicoderange kbd:lang(zh-CN),.no-unicoderange kbd:lang(zh-Hans),.no-unicoderange pre:lang(zh-CN),.no-unicoderange pre:lang(zh-Hans),.no-unicoderange samp:lang(zh-CN),.no-unicoderange samp:lang(zh-Hans){font-family:Menlo,Consolas,Courier,Han Heiti GB,monospace,monospace,sans-serif}code:lang(ja),kbd:lang(ja),pre:lang(ja),samp:lang(ja){font-family:Yakumono Sans,Menlo,Consolas,Courier,monospace,monospace,sans-serif}.no-unicoderange code:lang(ja),.no-unicoderange kbd:lang(ja),.no-unicoderange pre:lang(ja),.no-unicoderange samp:lang(ja){font-family:Menlo,Consolas,Courier,monospace,monospace,sans-serif}.no-unicoderange h-char.bd-liga,.no-unicoderange h-char[unicode=b7],h-ruby.romanization rt,h-ruby [annotation] rt,h-ruby h-diao,h-ruby h-zhuyin,html,ruby.romanization rt,ruby [annotation] rt,ruby h-diao,ruby h-zhuyin{-ms-font-feature-settings:"liga";-webkit-font-feature-settings:"liga";font-feature-settings:"liga"}[lang*=Hans],[lang*=Hant],[lang=zh-CN],[lang=zh-HK],[lang=zh-TW],[lang^=zh],article blockquote i,article blockquote var,article strong,code,html,kbd,pre,samp{-ms-font-feature-settings:"liga","locl" 0;-webkit-font-feature-settings:"liga","locl" 0;font-feature-settings:"liga","locl" 0}.no-unicoderange h-char.bd-cop:lang(zh-Hant),.no-unicoderange h-char.bd-cop:lang(zh-HK),.no-unicoderange h-char.bd-cop:lang(zh-TW){font-family:-apple-system,Han Heiti CNS}.no-unicoderange h-char.bd-liga,.no-unicoderange h-char[unicode=b7]{font-family:Biaodian Basic,Han Heiti}.no-unicoderange h-char[unicode="201c"]:lang(zh-CN),.no-unicoderange h-char[unicode="201c"]:lang(zh-Hans),.no-unicoderange h-char[unicode="201d"]:lang(zh-CN),.no-unicoderange h-char[unicode="201d"]:lang(zh-Hans),.no-unicoderange h-char[unicode="2018"]:lang(zh-CN),.no-unicoderange h-char[unicode="2018"]:lang(zh-Hans),.no-unicoderange h-char[unicode="2019"]:lang(zh-CN),.no-unicoderange h-char[unicode="2019"]:lang(zh-Hans){font-family:Han Heiti GB}i,var{font-style:inherit}.no-unicoderange h-ruby h-diao,.no-unicoderange h-ruby h-zhuyin,.no-unicoderange ruby h-diao,.no-unicoderange ruby h-zhuyin,h-ruby h-diao,ruby h-diao{font-family:Zhuyin Kaiti,cursive,serif}h-ruby.romanization rt,h-ruby [annotation] rt,ruby.romanization rt,ruby [annotation] rt{font-family:Romanization Sans,PT Mono,monospace,Han Heiti,sans-serif}.no-kaiti i,.no-kaiti var{padding-bottom:.05em;border-bottom:3px double #d3d3d3}article{line-height:1.7;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}article li,article p{text-align:justify;text-justify:inter-ideograph}article h1+blockquote,article h1+h2,article h1+h3,article h1+h4,article h1+h5,article h1+h6,article h1+ol,article h1+p,article h1+section>blockquote:first-child,article h1+section>h2:first-child,article h1+section>h3:first-child,article h1+section>h4:first-child,article h1+section>h5:first-child,article h1+section>h6:first-child,article h1+section>ol:first-child,article h1+section>p:first-child,article h1+section>ul:first-child,article h1+ul,article h2+blockquote,article h2+h2,article h2+h3,article h2+h4,article h2+h5,article h2+h6,article h2+ol,article h2+p,article h2+section>blockquote:first-child,article h2+section>h2:first-child,article h2+section>h3:first-child,article h2+section>h4:first-child,article h2+section>h5:first-child,article h2+section>h6:first-child,article h2+section>ol:first-child,article h2+section>p:first-child,article h2+section>ul:first-child,article h2+ul,article h3+blockquote,article h3+h3,article h3+h4,article h3+h5,article h3+h6,article h3+ol,article h3+p,article h3+section>blockquote:first-child,article h3+section>h3:first-child,article h3+section>h4:first-child,article h3+section>h5:first-child,article h3+section>h6:first-child,article h3+section>ol:first-child,article h3+section>p:first-child,article h3+section>ul:first-child,article h3+ul,article h4+blockquote,article h4+h4,article h4+h5,article h4+h6,article h4+ol,article h4+p,article h4+section>blockquote:first-child,article h4+section>h4:first-child,article h4+section>h5:first-child,article h4+section>h6:first-child,article h4+section>ol:first-child,article h4+section>p:first-child,article h4+section>ul:first-child,article h4+ul,article h5+blockquote,article h5+h5,article h5+h6,article h5+ol,article h5+p,article h5+section>blockquote:first-child,article h5+section>h5:first-child,article h5+section>h6:first-child,article h5+section>ol:first-child,article h5+section>p:first-child,article h5+section>ul:first-child,article h5+ul,article h6+blockquote,article h6+h6,article h6+ol,article h6+p,article h6+section>blockquote:first-child,article h6+section>h6:first-child,article h6+section>ol:first-child,article h6+section>p:first-child,article h6+section>ul:first-child,article h6+ul{margin-top:-1em}ol,ul{padding-left:1rem}blockquote,figure{margin-left:1rem;margin-right:1rem}.poem-like p,p.poem-like{margin-left:1rem}@media only screen and (max-width:480px){.poem-like p,p.poem-like{margin-left:1em}}article blockquote{margin-right:0}@media only screen and (max-width:480px){article blockquote{margin-left:1em}}figure blockquote{margin:0}blockquote blockquote{margin-left:.5rem;margin-right:.5rem}article blockquote blockquote{margin-right:0}@media only screen and (max-width:480px){blockquote,figure{margin-left:1em;margin-right:1em}}h-hws,h-hws[hidden]{display:inline;visibility:hidden;font:.89em Arial}code h-hws,code h-hws[hidden],h-hws.quote-inner,h-hws.quote-outer:lang(zh-CN),h-hws.quote-outer:lang(zh-Hans),h-hws[hidden].quote-inner,h-hws[hidden].quote-outer:lang(zh-CN),h-hws[hidden].quote-outer:lang(zh-Hans),kbd h-hws,kbd h-hws[hidden],pre h-hws,pre h-hws[hidden],samp h-hws,samp h-hws[hidden]{display:none}@font-face{src:url(data:font/woff;base64,d09GRk9UVE8AAAWsAAsAAAAACFwAAQABAAAAAAAAAAAAAAAAAAAAAAAAAABDRkYgAAABCAAAAUYAAAFyhzPUW0ZGVE0AAAJQAAAAHAAAABxxEJuUR0RFRgAAAmwAAAAcAAAAHgAnAA9PUy8yAAACiAAAAEgAAABgZQBqMWNtYXAAAALQAAAAQgAAAVIAIgXvaGVhZAAAAxQAAAAtAAAANgO/HHtoaGVhAAADRAAAAB4AAAAkBfYDVWhtdHgAAANkAAAAIAAAACQPzwAAbWF4cAAAA4QAAAAGAAAABgAJUABuYW1lAAADjAAAAgsAAAOT26EqFXBvc3QAAAWYAAAAEwAAACD/nQAyeJxVj7FKw1AUhs9pG2pjvNZiRCSUoB2cah2UDlLQLoIUQpWiUtQYk5rBpKStQ1/A6NWlfQ0354CDb+EDWMH93jYVTBGUnuHnfD+Hw/8jJBKAiGRfd8qu55lG23YdwBgg7PI08FXkazGei/PlREmKZ0VI3dY2KP1bpCSl3B9qggIf8wpAWgG+oEBGwYsMiJM3M0AgDSuwDkXYgSO4hGbHsQvRlKv5QmGzXG01dcPMW55uWHaj45m/3LamyG1Z51vbxT29ZV6prqNGgfWu67hqxXaMazdC9b/ANAEA3qEf9bzHB6T4iE+QQjyoaIe145PTOvdpwL8CjDQXxLm/NNTG/reWfB9mZTagYSnsC6zOLJmOe2GJ9YWbM5lFZjigAlPZqzy5oLwnEEpGz2TUJeyTvBASIX9bpDKVxEAMJCmYDaS5H17WgIkAAAAAAAEAAAAA0S6ZbgAAAADOiyhTAAAAANFW2dJ4nGNgZGBg4AFiMSBmYmAEQg4gZgHzGAAD9gA3eJxjYGb+z6jDwMrAwTSTKY2BgcEHQjOmMRgxPATygVJwoMDEBZSBckK9w/2AFC+DArPxf2OGsywMDGcZENJA1UDICAAXvgn4eJxjYGBgZoBgGQZGBhDwAfIYwXwWBgMgzQGETGAZXgaF//+RWIz/v/5/DNUFBoxsDMhcBqg+FMCMKTSsAAAGLQkRAAB4nGNgZGBgAOItc7RU4/ltvjJwszCAwMWwnERkmvEL0x4gxcHABOIBAAKDCPUAAAB4nGNgZGBgNv5vzHCWRYIBCBi/MDAyoAJOAFUmA1IAAHicY/zCAAYsEgwMzM8YGBhDgRwNBgYmAwgGAQBF0QLdAABQAAAJAAB4nGVSwW7aQBB9JhDUSq16rHraH4hliFAScYNYQQoQ2jRw6mGBNbYw3mhZIiX9iX5DLjn1H3qqVKmnXvo7fV6vQtWCvH7zZubNzI4BvMF3BKh+b9H2OEADM49raGLj8QFjnjyuM+anxw0MgqXHh3gV/PC4ife1z8wK6i9oRU6hxAFe4tLjGl7jk8cHjNl5XGfMN48b+IJfHh/iXfDV4yYeg9/oQWILhSUENAqeAzIFnwdnazIjZEQLpLTQk1u1FLoQA1nIB11oMcqKRUrPR47dwxAXhLPekK8PFF6xqZxyhqZa7XJJ0ELIZiO+u7jhMDOMifb5R/9mtsIoanVvLmfjrpM+epb6v+iUqYYzZX6ev4tNcE2msvZsOZflfGX83XNGiBOeXe5PYk3NMiYhm1N5zm2H6LjnFMe0zph3jpjVY3ZzxUojojH7w1SZbcYLq4aYXAu+HEy1XejirnSEJ1F3I9dK2yTMs3k77ISd0+P2mTiPp/HwajKKx1SqVtNnK4Z/xZatHxPcRl8boxaWpcDyOf3VaoWLTdy1CGZod6bOU2rd4p6ejPedkhcuZ68smKl9ZpWTON46xrDGkuzG7WlNTpK1Tm/O/e1VCneBGZUVK4RsMVf8lIRRiTLCamFTJfr69t5kq9SKbTWJSLRxnkQXVlgjl2ojzVpIa00237mQQttsobYh/gBlXahAAHicY2BmAIP/sxiMGLAAACpVAc8A) format("woff"),url(data:font/otf;base64,T1RUTwAJAIAAAwAQQ0ZGIJKPGSsAAAV0AAABPE9TLzJk82fyAAABAAAAAGBjbWFwAIMBOwAABMwAAACGaGVhZADsRdkAAACcAAAANmhoZWEF9gEwAAAA1AAAACRobXR4D88AAAAABrAAAAAibWF4cAAJUAAAAAD4AAAABm5hbWUQl1KGAAABYAAAA2xwb3N0/50AMgAABVQAAAAgAAEAAAABAACo8vYlXw889QADBAAAAAAAzosoUwAAAADRVtnSAAAAAAH0ArwAAAADAAIAAAAAAAAAAQAAAzP/MwDNAfQAAAAAAfQAAQAAAAAAAAAAAAAAAAAAAAgAAFAAAAkAAAADAcEBLAAFAAgCmQJmAAAATAKZAmYAAAFmADIA4QAAAAAFAAAAAAAAAAAAACACCgAAAQAAAAAAAABVS1dOAAAAAAAgAzP/MwDNBAAAzQAAAAEAAAAAAAAAAAAgACAAAAAAABAAxgABAAAAAAAAABgAAAABAAAAAAABAAUAGAABAAAAAAACAAcAHQABAAAAAAADABgAJAABAAAAAAAEAAUAGAABAAAAAAAFAEgAPAABAAAAAAAGAA0AhAABAAAAAAAHAFEAkQADAAEECQAAADAA4gADAAEECQABAAoBEgADAAEECQACAA4BHAADAAEECQADADABKgADAAEECQAEAAoBEgADAAEECQAFAJABWgADAAEECQAGABoB6gADAAEECQAHAKICBEJhc2VkIG9uIEhhbmF6b25vIE1pbmNob1RXQkxHUmVndWxhcjEuMDAxO1VLV047VFdCTEctUmVndWxhclZlcnNpb24gMS4wMDE7UFMgMDAxLjAwMTtob3Rjb252IDEuMC43MDttYWtlb3RmLmxpYjIuNS41ODMyOSBERVZFTE9QTUVOVFRXQkxHLVJlZ3VsYXJQbGVhc2UgcmVmZXIgdG8gdGhlIENvcHlyaWdodCBzZWN0aW9uIGZvciB0aGUgZm9udCB0cmFkZW1hcmsgYXR0cmlidXRpb24gbm90aWNlcy4AQgBhAHMAZQBkACAAbwBuACAASABhAG4AYQB6AG8AbgBvACAATQBpAG4AYwBoAG8AVABXAEIATABHAFIAZQBnAHUAbABhAHIAMQAuADAAMAAxADsAVQBLAFcATgA7AFQAVwBCAEwARwAtAFIAZQBnAHUAbABhAHIAVgBlAHIAcwBpAG8AbgAgADEALgAwADAAMQA7AFAAUwAgADAAMAAxAC4AMAAwADEAOwBoAG8AdABjAG8AbgB2ACAAMQAuADAALgA3ADAAOwBtAGEAawBlAG8AdABmAC4AbABpAGIAMgAuADUALgA1ADgAMwAyADkAIABEAEUAVgBFAEwATwBQAE0ARQBOAFQAVABXAEIATABHAC0AUgBlAGcAdQBsAGEAcgBQAGwAZQBhAHMAZQAgAHIAZQBmAGUAcgAgAHQAbwAgAHQAaABlACAAQwBvAHAAeQByAGkAZwBoAHQAIABzAGUAYwB0AGkAbwBuACAAZgBvAHIAIAB0AGgAZQAgAGYAbwBuAHQAIAB0AHIAYQBkAGUAbQBhAHIAawAgAGEAdAB0AHIAaQBiAHUAdABpAG8AbgAgAG4AbwB0AGkAYwBlAHMALgAAAAMAAAADAAAAVgABAAAAAAAcAAMAAQAAAFYABgA6AAAACQAYAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAQAMAAAAAgACAACAAAAAAANACD//wAAAAAADQAg//8ACP/1/+MAAQAAAAAAAAAAAAAAAwAAAAAAAP+aADIAAAAAAAAAAAAAAAAAAAAAAAAAAAEABAIAAQEBDkhhbkNvcnJlY3Rpb24AAQEBOfgQAPgiAfgjAvgjA/gYBPsTDAOLi/iI+VAFHqAAl2Vi/4uLHqAAl2Vi/4uLDAf3Vw/3YRGO980SAAkBAQMJEyExNTxUYkNSQ1IuMDAxc3BhY2UuZnJhY2ZpZ3VyZXNwYWNlLnRmZmlndXJlc3BhY2UudG9zZl81Njh1bmkwMDAwQmFzZWQgb24gSGFuYXpvbm8gTWluY2hvSGFuIENvcnJlY3Rpb24AAAEBhwEAAQABiQQACQEBS05RVFZZXF5g+IiLvfjsvQGLvfgkvQP4iBb5UPyI/VAH2/keFffoBvs++5MF91z3ZhX8kgf7PveTBW1eFfc++5MF++gG9yD3wBX7PvuTBfiSBw736Q76rA76eg6zDvjEDvjEDosOiw6LiwYB9AAAAVUAAAQYAAAD5gAAACgAAAIwAAACMAAAAAAAAAAAAAA=) format("opentype");font-family:Han Space;unicode-range:U+20}h-char.bd-hangable:lang(zh) h-cs,h-char.bd-hangable:lang(zh) h-cs[hidden],h-char.bd-hangable:lang(zh-Hant) h-cs,h-char.bd-hangable:lang(zh-Hant) h-cs[hidden],h-char.bd-hangable:lang(zh-HK) h-cs,h-char.bd-hangable:lang(zh-HK) h-cs[hidden],h-char.bd-hangable:lang(zh-TW) h-cs,h-char.bd-hangable:lang(zh-TW) h-cs[hidden]{display:inline;visibility:inherit;font-family:inherit;font-size:inherit}h-cs.hangable-outer,h-cs.hangable-outer[hidden]{display:inline;font:1em Han Space}h-cs.hangable-outer:lang(zh-Hant),h-cs.hangable-outer:lang(zh-HK),h-cs.hangable-outer:lang(zh-TW),h-cs.hangable-outer[hidden]:lang(zh-Hant),h-cs.hangable-outer[hidden]:lang(zh-HK),h-cs.hangable-outer[hidden]:lang(zh-TW){display:none}h-char.bd-hangable:lang(ja),h-char.bd-hangable:lang(zh-CN),h-char.bd-hangable:lang(zh-Hans){position:relative}h-char.bd-hangable:lang(ja):after,h-char.bd-hangable:lang(zh-CN):after,h-char.bd-hangable:lang(zh-Hans):after{display:none!important}h-char.bd-hangable:lang(ja):before,h-char.bd-hangable:lang(zh-CN):before,h-char.bd-hangable:lang(zh-Hans):before{display:inline!important;content:" ";font:1em Han Space,Menlo,Consolas,Courier}h-char.bd-hangable:lang(ja)>h-inner,h-char.bd-hangable:lang(zh-CN)>h-inner,h-char.bd-hangable:lang(zh-Hans)>h-inner{-moz-text-emphasis:none;-webkit-text-emphasis:none;text-emphasis:none;font-style:normal;font-weight:400;line-height:normal;text-decoration:none;text-indent:0;position:absolute;left:0;top:0;display:inline-block;line-height:1.1}h-ru h-char.bd-hangable:lang(ja)>h-inner,h-ru h-char.bd-hangable:lang(zh-CN)>h-inner,h-ru h-char.bd-hangable:lang(zh-Hans)>h-inner,ruby h-char.bd-hangable:lang(ja)>h-inner,ruby h-char.bd-hangable:lang(zh-CN)>h-inner,ruby h-char.bd-hangable:lang(zh-Hans)>h-inner{position:relative}h-char.bd-jiya.bd-end:after,h-char.bd-jiya.bd-open:before,h-cs,h-cs[hidden]{display:none;visibility:hidden;content:" ";font:.825em Courier;letter-spacing:0;white-space:normal}h-cs.jinze-outer,h-cs.jinze-outer[hidden]{display:inline}h-char.bd-jiya.bd-open>h-inner{margin-left:-.5em}h-char.bd-jiya.bd-close>h-inner,h-char.bd-jiya.bd-cop>h-inner,h-char.bd-jiya[unicode=ff0e]>h-inner{letter-spacing:-.5em}h-char.bd-jiya.bd-close:after,h-char.bd-jiya.bd-cop:after,h-char.bd-jiya.bd-open:before,h-char.bd-jiya[unicode=ff0e]:after{display:inline}h-char.bd-jiya.bd-cop:lang(zh-Hant):after,h-char.bd-jiya.bd-cop:lang(zh-HK):after,h-char.bd-jiya.bd-cop:lang(zh-TW):after{display:none}h-char.bd-jiya.bd-cop:lang(zh-Hant)>h-inner,h-char.bd-jiya.bd-cop:lang(zh-HK)>h-inner,h-char.bd-jiya.bd-cop:lang(zh-TW)>h-inner{letter-spacing:inherit}h-char.bd-consecutive.bd-end:not(.end-portion):after,h-char.bd-consecutive.bd-open[prev=bd-open]:before,h-cs.jiya-outer.bd-end:not(.end-portion){display:none}h-cs.jiya-outer.bd-end[next=bd-open]{display:inline}h-char.bd-consecutive.bd-open[prev*=bd-cop]:lang(zh-Hant):before,h-char.bd-consecutive.bd-open[prev*=bd-cop]:lang(zh-HK):before,h-char.bd-consecutive.bd-open[prev*=bd-cop]:lang(zh-TW):before,h-cs.jiya-outer.bd-end:lang(zh-Hant),h-cs.jiya-outer.bd-end:lang(zh-HK),h-cs.jiya-outer.bd-end:lang(zh-TW){display:none}h-char.bd-consecutive[unicode="30fb"]:not(.end-portion),h-char.bd-consecutive[unicode=b7]:not(.end-portion){letter-spacing:-.5em}h-char.bd-consecutive.bd-liga:not(.end-portion){margin-right:-.25em}h-char[display-as]{position:relative;display:inline-block}h-char[display-as] h-inner{color:transparent}h-char[display-as]:after{position:absolute;left:0;display:inline-block;content:attr(display-as)}h-char[display-as].comb-liga:after{font-family:Romanization Sans,Zhuyin Kaiti}</style><meta name="generator" content="Gatsby 2.32.13"/><link rel="canonical" href="https://raptazure.github.io/posts/sml/" data-baseprotocol="https:" data-basehost="raptazure.github.io"/><link rel="icon" href="/favicon-32x32.png?v=66298ac869c312fbdefc1ee9aad6e319" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#ffffff"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=66298ac869c312fbdefc1ee9aad6e319"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=66298ac869c312fbdefc1ee9aad6e319"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=66298ac869c312fbdefc1ee9aad6e319"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=66298ac869c312fbdefc1ee9aad6e319"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=66298ac869c312fbdefc1ee9aad6e319"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=66298ac869c312fbdefc1ee9aad6e319"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=66298ac869c312fbdefc1ee9aad6e319"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=66298ac869c312fbdefc1ee9aad6e319"/><link rel="alternate" type="application/rss+xml" title="Meditation | RSS Feed" href="/rss.xml"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><title data-react-helmet="true">Standard ML | Raptazure</title><link data-react-helmet="true" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"/><meta data-react-helmet="true" name="description" content="Meditation"/><meta data-react-helmet="true" name="keywords" content="blog, gatsbyjs, computer-science"/><meta data-react-helmet="true" name="google-site-verification" content=""/><meta data-react-helmet="true" name="baidu-site-verification" content=""/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@iimtsuki"/><meta data-react-helmet="true" name="twitter:site" content="@iimtsuki"/><meta data-react-helmet="true" name="twitter:title" content="Standard ML | Raptazure"/><link as="script" rel="preload" href="/webpack-runtime-cdb2fbade185b8317bb8.js"/><link as="script" rel="preload" href="/framework-9252bfa5ea71b588207d.js"/><link as="script" rel="preload" href="/app-687b067c9b1f0def51ae.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/e30115b4d33dc6d7723ba506c53f6f70ec229815-a3762906aab692d550c9.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-e50663736f0d2a1c8060.js"/><link as="fetch" rel="preload" href="/page-data/posts/sml/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2345487092.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="1tl2ur9">html{box-sizing:border-box;}*,*::before,*::after{box-sizing:inherit;}html{font-size:18px !important;line-height:1.45 !important;font-variant-numeric:lining-nums;}body{width:100%;overflow-x:hidden;overflow-y:scroll;color:#000;background-color:#fffff9;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;}a{color:#000;-webkit-text-decoration:none;text-decoration:none;}a:hover,a:focus{-webkit-text-decoration:underline;text-decoration:underline;}article a{-webkit-text-decoration:underline;text-decoration:underline;}img{max-width:100%;object-fit:contain;position:relative;}figure{margin:2rem 0;}figcaption{font-size:80%;}table{width:100%;margin-bottom:1rem;border:1px solid #f5f3f7;font-size:85%;border-collapse:collapse;}td,th{padding:.25rem .5rem;border:1px solid #f5f3f7;}th{text-align:left;}tbody tr:nth-of-type(odd) td{background-color:#fbfafc;}tbody tr:nth-of-type(odd) tr{background-color:#fbfafc;}dt{font-weight:bold;}dd{margin-bottom:.5rem;}hr{position:relative;margin:1.5rem 0;border:0;border-top:1px solid #f5f3f7;}blockquote{margin:0 0;border-left:.2rem solid #777;color:#777;padding-left:1rem;}blockquote p{margin-top:0;margin-bottom:0;}@media (min-width:26.666666666666668em){blockquote{padding-right:5rem;}}pre,code,kbd{font-variant-ligatures:none;}.katex{font-size:1em !important;}.katex-display > .katex{max-width:100%;}.katex-display > .katex > .katex-html{max-width:100%;overflow-x:auto;overflow-y:hidden;}.footnotes{font-size:0.8rem;}.footnote-backref,.footnote-ref{-webkit-text-decoration:none;text-decoration:none;}</style><style data-emotion-css="zf0iqh">.css-zf0iqh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}</style><div class="css-zf0iqh ekje2240"><style data-emotion-css="1wvahdb">.css-1wvahdb{height:100px;padding:0 1.5rem;color:rgba(255,255,249,0.5);}</style><header class="css-1wvahdb e1xhtnev0"><style data-emotion-css="1gxlvne">.css-1gxlvne{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;-webkit-flex:4 1 120px;-ms-flex:4 1 120px;flex:4 1 120px;}</style><style data-emotion-css="o8vgh1">.css-o8vgh1{position:relative;margin-left:auto;margin-right:auto;width:auto;max-width:40em;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;-webkit-flex:4 1 120px;-ms-flex:4 1 120px;flex:4 1 120px;}</style><div class="e1xhtnev1 css-o8vgh1 eqdtqc0"><style data-emotion-css="1kayfef">.css-1kayfef{color:#000;font-size:2.2rem;margin-right:1rem;font-family:'Dancing Script',cursive;}.css-1kayfef:hover,.css-1kayfef:focus{-webkit-text-decoration:none;text-decoration:none;}</style><a class="css-1kayfef e1xhtnev2" href="/">Meditation</a><style data-emotion-css="o2j9ze">.css-o2j9ze{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}</style><div class="css-o2j9ze e1xhtnev4"><style data-emotion-css="xlrezp">.css-xlrezp{color:#000;font-size:1rem;margin-left:1rem;}.css-xlrezp:hover,.css-xlrezp:focus{-webkit-text-decoration:none;text-decoration:none;}</style><a class="css-xlrezp e1xhtnev3" href="/about">About</a><a class="css-xlrezp e1xhtnev3" href="/friends">Friends</a></div></div></header><style data-emotion-css="b95f0i">.css-b95f0i{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex:1;-ms-flex:1;flex:1;}</style><main class="css-b95f0i e15xeevy0"><style data-emotion-css="pcbh56">.css-pcbh56{display:block;-webkit-flex:1;-ms-flex:1;flex:1;position:relative;padding:1.5rem;margin-bottom:3rem;}</style><div class="css-pcbh56 e1xri82u0"><style data-emotion-css="1edd6f2">.css-1edd6f2{position:relative;margin-left:auto;margin-right:auto;width:auto;max-width:40em;}</style><div class="css-1edd6f2 eqdtqc0"><article lang="zh-Hans"><h1>Standard ML</h1><style data-emotion-css="16dlb2j">.css-16dlb2j{color:#808080;min-width:200px;margin-right:1rem;font-size:0.9rem;font-variant-numeric:tabular-nums lining-nums;}</style><time class="css-16dlb2j e17ylof40">2020-09-16</time><style data-emotion-css="6cic6e">.css-6cic6e{color:#808080;min-width:200px;margin-right:0.5em;font-size:0.9rem;font-variant-numeric:tabular-nums lining-nums;text-transform:uppercase;}.css-6cic6e:before{content:'#';}</style><span class="css-6cic6e ev9klxm0">Polymorphic λ</span><h3>ML Variable Bindings and Expressions</h3><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">val</span> z <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token comment">(* static environment: z : int *)</span>
<span class="token comment">(* dynamic environment: z --&gt; 3 *)</span>

<span class="token keyword">val</span> w <span class="token operator">=</span> z <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">(* static environment: z : int, w : int *)</span>
<span class="token comment">(* dynamic environment: z --&gt; 3, w --&gt; 4 *)</span></code></pre></div><ol><li>The semantics</li></ol><ul><li>Syntax is just how you write something</li><li>Semantics is what something means<ul><li>Type-checking (before program runs)</li><li>Evaluation (as program runs)</li></ul></li><li>For variable bindings:<ul><li>Type-check expression and extend static environment </li><li>Evaluate expression and extend dynamic environment</li></ul></li></ul><ol start="2"><li>Rules for expressions:</li></ol><ul><li>Every kind of expression has:<ul><li>Syntax </li><li>Type-checking rules. Produce a type or fails.</li><li>Evaluation rules (used only on things that type-check).<br/>Produce a value (or exception or infinite-loop).</li></ul></li></ul><ol start="3"><li>Reasons for shadowing:</li></ol><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">val</span> a <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">val</span> b <span class="token operator">=</span> a <span class="token comment">(* b is bound to 1 *)</span>
<span class="token keyword">val</span> a <span class="token operator">=</span> <span class="token number">2</span></code></pre></div><ul><li>Expressions in variable bindings are evaluated <strong>eagerly</strong><ul><li>Before the variable binding finishes</li><li>Afterwards, the expression producing the value is irrelevant</li></ul></li><li>There is no way to assign to a variable in ML<ul><li>Can only shadow in a later environment  </li></ul></li></ul><h3>ML Functions</h3><ol><li>Functions informally</li></ol><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">fun</span> <span class="token function">pow</span> <span class="token punctuation">(</span>x <span class="token punctuation">:</span> <span class="token class-name">int</span><span class="token punctuation">,</span> y <span class="token punctuation">:</span> <span class="token class-name">int</span><span class="token punctuation">)</span> <span class="token operator">=</span> 
  <span class="token keyword">if</span> y <span class="token operator">=</span> <span class="token number">0</span> 
  <span class="token keyword">then</span> <span class="token number">1</span>
  <span class="token keyword">else</span> x <span class="token operator">*</span> pow <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span></code></pre></div><ul><li>Cannot refer to later function bindings<ul><li>Simply ML`s rule</li><li>Helper functions must come before their uses</li><li>Need special construct for mutual recursion </li></ul></li></ul><ol start="2"><li>Function bindings formally</li></ol><ul><li>Syntax: <code class="language-text">fun x0 (x1 : t1, ..., xn : tn) = e</code></li><li>Type-checking: <ul><li>Add binding <code class="language-text">x0 : (t1 * ... * tn) -&gt; t</code> if:</li><li>Can type-check body <code class="language-text">e</code> to have type <code class="language-text">t</code> in the static environment containing:<ul><li>Enclosing static environment (earlier bindings)</li><li><code class="language-text">x1 : t1, ..., xn : tn</code> (arguments with their types)</li><li><code class="language-text">x0 : (t1 * ... * tn) -&gt; t</code> (for recursion) </li></ul></li></ul></li><li>Evaluation: <ul><li>A function is a value — we simply add x0 to the environment as a function that can be called later. </li><li>As expected for recursion, x0 is in the dynamic environment in the function body and for subsequent bindings.</li></ul></li></ul><ol start="3"><li>Function calls formally</li></ol><ul><li>Syntax: <code class="language-text">e0 (e1,...,en)</code> with the parentheses optional if there is exactly one argument.</li><li>Type-checking: require that <code class="language-text">e0</code> has a type that looks like <code class="language-text">t1 * ... * tn -&gt; t</code> and for 1 ≤ i ≤ n, <code class="language-text">ei</code> has type <code class="language-text">ti</code>. Then the whole call has type <code class="language-text">t</code>.</li><li>Evaluation:<ul><li>Evaluate <code class="language-text">e0</code> to <code class="language-text">fun x0 (x1 : t1, ..., xn : tn) = e</code>. Since call type-checked, result will be a function. Evaluate arguments to values <code class="language-text">v1, ..., vn</code> (Under current dynamic environment).</li><li>Result is evaluation of <code class="language-text">e</code> in an environment extended to map <code class="language-text">x1</code> to <code class="language-text">v1, ..., xn</code> to <code class="language-text">vn</code> (An environment is actually the environment where the function was defined, and includes <code class="language-text">x0</code> for recursion).</li></ul></li></ul><h3>Pairs and Other Tuples</h3><ol><li>Build</li></ol><ul><li>Syntax: <code class="language-text">(e1, e2)</code></li><li>Type-checking: if <code class="language-text">e1</code> has type <code class="language-text">ta</code> and <code class="language-text">e2</code> has type <code class="language-text">tb</code>, then the pair expression has type <code class="language-text">ta * tb</code> - a new kind of type.</li><li>Evaluation: evaluate <code class="language-text">e1</code> to <code class="language-text">v1</code> and <code class="language-text">e2</code> to <code class="language-text">v2</code>, result is <code class="language-text">(v1, v2)</code> - a pair of values is a value.</li></ul><ol start="2"><li>Access</li></ol><ul><li>Syntax: <code class="language-text">#1 e</code> and <code class="language-text">#2 e</code></li><li>Type-checking: if <code class="language-text">e</code> has type <code class="language-text">ta * tb</code>, then <code class="language-text">#1 e</code> has type <code class="language-text">ta</code> and <code class="language-text">#2 e</code> has type <code class="language-text">tb</code>.</li><li>Evaluation: evaluate <code class="language-text">e</code> to a pair of values and return first or second piece.</li></ul><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">fun</span> <span class="token function">swap</span> <span class="token punctuation">(</span>pr <span class="token punctuation">:</span> <span class="token class-name">int <span class="token operator">*</span> bool</span><span class="token punctuation">)</span> <span class="token operator">=</span> 
  <span class="token punctuation">(</span><span class="token operator">#</span><span class="token number">2</span> pr<span class="token punctuation">,</span> <span class="token operator">#</span><span class="token number">1</span> pr<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">sum_two_pairs</span> <span class="token punctuation">(</span>pr1 <span class="token punctuation">:</span> <span class="token class-name">int <span class="token operator">*</span> int</span><span class="token punctuation">,</span> pr2 <span class="token punctuation">:</span> <span class="token class-name">int <span class="token operator">*</span> int</span><span class="token punctuation">)</span> <span class="token operator">=</span>
  <span class="token punctuation">(</span><span class="token operator">#</span><span class="token number">1</span> pr1<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">#</span><span class="token number">2</span> pr1<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">#</span><span class="token number">1</span> pr2<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">#</span><span class="token number">2</span> pr2<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">div_mod</span> <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token class-name">int</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token class-name">int</span><span class="token punctuation">)</span> <span class="token operator">=</span>
  <span class="token punctuation">(</span>x div y<span class="token punctuation">,</span> x mod y<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">sort_pair</span> <span class="token punctuation">(</span>pr <span class="token punctuation">:</span> <span class="token class-name">int <span class="token operator">*</span> int</span><span class="token punctuation">)</span> <span class="token operator">=</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">#</span><span class="token number">1</span> pr<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token punctuation">(</span><span class="token operator">#</span><span class="token number">2</span> pr<span class="token punctuation">)</span>
  <span class="token keyword">then</span> pr
  <span class="token keyword">else</span> <span class="token punctuation">(</span><span class="token operator">#</span><span class="token number">2</span> pr<span class="token punctuation">,</span> <span class="token operator">#</span><span class="token number">1</span> pr<span class="token punctuation">)</span></code></pre></div><ol start="3"><li>Tuple is a generalization of pairs. </li></ol><ul><li>Pairs and tuples can be nested (implied by the syntax and semantics)</li></ul><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">val</span> x1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> x2 <span class="token operator">=</span> <span class="token operator">#</span><span class="token number">1</span> <span class="token punctuation">(</span><span class="token operator">#</span><span class="token number">2</span> x1<span class="token punctuation">)</span></code></pre></div><h3>Lists</h3><ol><li>Build: <code class="language-text">[v1, v2, ... ,vn]</code>, <code class="language-text">::</code> pronounced <strong>cons</strong></li><li>Access: <code class="language-text">null</code>, <code class="language-text">hd</code>, <code class="language-text">tl</code> </li><li>Functions over lists are usually recursive, only way to get to all the elements.</li></ol><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">fun</span> <span class="token function">sum_list</span> <span class="token punctuation">(</span>xs <span class="token punctuation">:</span> <span class="token class-name">int list</span><span class="token punctuation">)</span> <span class="token operator">=</span>
  <span class="token keyword">if</span> null xs
  <span class="token keyword">then</span> <span class="token number">0</span>
  <span class="token keyword">else</span> hd<span class="token punctuation">(</span>xs<span class="token punctuation">)</span> <span class="token operator">+</span> sum_list<span class="token punctuation">(</span>tl xs<span class="token punctuation">)</span>
  
<span class="token keyword">fun</span> <span class="token function">countdown</span> <span class="token punctuation">(</span>x <span class="token punctuation">:</span> <span class="token class-name">int</span><span class="token punctuation">)</span> <span class="token operator">=</span>
  <span class="token keyword">if</span> x <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">then</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">else</span> x <span class="token operator">::</span> countdown<span class="token punctuation">(</span>x <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">append</span> <span class="token punctuation">(</span>xs <span class="token punctuation">:</span> <span class="token class-name">int list</span><span class="token punctuation">,</span> ys <span class="token punctuation">:</span> <span class="token class-name">int list</span><span class="token punctuation">)</span> <span class="token operator">=</span>
  <span class="token keyword">if</span> null xs
  <span class="token keyword">then</span> ys
  <span class="token keyword">else</span> <span class="token punctuation">(</span>hd xs<span class="token punctuation">)</span> <span class="token operator">::</span> append<span class="token punctuation">(</span>tl xs<span class="token punctuation">,</span> ys<span class="token punctuation">)</span></code></pre></div><h3>Let Expressions</h3><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">fun</span> <span class="token function">countup_from</span> <span class="token punctuation">(</span>x <span class="token punctuation">:</span> <span class="token class-name">int</span><span class="token punctuation">)</span> <span class="token operator">=</span>
  <span class="token keyword">let</span> 
    <span class="token keyword">fun</span> <span class="token function">count</span> <span class="token punctuation">(</span>from <span class="token punctuation">:</span> <span class="token class-name">int</span><span class="token punctuation">)</span> <span class="token operator">=</span>
      <span class="token keyword">if</span> from <span class="token operator">=</span> x
      <span class="token keyword">then</span> x <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token keyword">else</span> from <span class="token operator">::</span> count <span class="token punctuation">(</span>from <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token keyword">in</span>
    count <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token keyword">end</span>

<span class="token keyword">fun</span> <span class="token function">max</span> <span class="token punctuation">(</span>xs <span class="token punctuation">:</span> <span class="token class-name">int list</span><span class="token punctuation">)</span> <span class="token operator">=</span>
  <span class="token keyword">if</span> null xs
  <span class="token keyword">then</span> <span class="token number">0</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> null <span class="token punctuation">(</span>tl xs<span class="token punctuation">)</span>
  <span class="token keyword">then</span> hd xs
  <span class="token keyword">else</span> 
    <span class="token comment">(* for style, could also use a let-binding for (hd xs) *)</span>
    <span class="token keyword">let</span> <span class="token keyword">val</span> tl_ans <span class="token operator">=</span> max <span class="token punctuation">(</span>tl xs<span class="token punctuation">)</span>
    <span class="token keyword">in</span> 
      <span class="token keyword">if</span> hd xs <span class="token operator">&gt;</span> tl_ans
      <span class="token keyword">then</span> hd xs
      <span class="token keyword">else</span> tl_ans
    <span class="token keyword">end</span></code></pre></div><ol><li>Syntax: <code class="language-text">let b1 b2 ... bn in e end</code>. Each <code class="language-text">bi</code> is any binding and <code class="language-text">e</code> is any expression.</li><li>Type-checking: Type-check each <code class="language-text">bi</code> and <code class="language-text">e</code> in a static environment that includes the previous bindings. Type of whole let-expression is the type of <code class="language-text">e</code>.</li><li>Evaluation: Evaluate each <code class="language-text">bi</code> and <code class="language-text">e</code> in a dynamic environment that includes the previous bindings. Result of whole let-expression is result of evaluating <code class="language-text">e</code>.</li><li>Scope: where a binding is in the environment. Only in later bindings and body of the let-expression.</li><li>The key to improve efficiency of recursion is not to do repeated work that might do repeated work. Saving recursive results in local bindings is essential.</li></ol><h3>Options</h3><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">fun</span> <span class="token function">max1</span> <span class="token punctuation">(</span>xs <span class="token punctuation">:</span> <span class="token class-name">int list</span><span class="token punctuation">)</span> <span class="token operator">=</span>
  <span class="token keyword">if</span> null xs
  <span class="token keyword">then</span> NONE
  <span class="token keyword">else</span> 
    <span class="token keyword">let</span> <span class="token keyword">val</span> tl_ans <span class="token operator">=</span> max1 <span class="token punctuation">(</span>tl xs<span class="token punctuation">)</span>
    <span class="token keyword">in</span> <span class="token keyword">if</span> isSome tl_ans <span class="token keyword">andalso</span> valOf tl_ans <span class="token operator">&gt;</span> hd xs
      <span class="token keyword">then</span> tl_ans
      <span class="token keyword">else</span> SOME <span class="token punctuation">(</span>hd xs<span class="token punctuation">)</span>
    <span class="token keyword">end</span></code></pre></div><ol><li>Building: <code class="language-text">NONE</code> has type <code class="language-text">&#x27;a option</code>, <code class="language-text">SOME e</code> has type <code class="language-text">t option</code> if <code class="language-text">e</code> has type <code class="language-text">t</code>.</li><li>Accessing: <code class="language-text">isSome</code> has type <code class="language-text">&#x27;a option -&gt; bool</code>, <code class="language-text">valOf</code> has type <code class="language-text">&#x27;a option -&gt; &#x27;a</code>  (exception if given <code class="language-text">NONE</code>).</li></ol><h3>Booleans and Comparison Operations</h3><ol><li>Syntax: <code class="language-text">e1 andalso e2</code>, <code class="language-text">e1 orelse e2</code>, <code class="language-text">not e1</code>.</li><li>Short-circuiting evaluation means <code class="language-text">andalso</code> and <code class="language-text">orelse</code> are not functions, but <code class="language-text">not</code> is just a pre-defined function.</li><li><code class="language-text">=</code> <code class="language-text">&lt;&gt;</code> can be used with any equality type but not with <code class="language-text">real</code>.</li></ol><h3>No Mutation: ML vs. Imperative Languages</h3><ol><li>In ML, we create aliases all the time without thinking about it because it is impossible to tell where there is aliasing.<ul><li>Example: <code class="language-text">tl</code> is constant time; does not copy rest of the list.</li><li>So do not worry and focus on the algorithm.</li></ul></li><li>In language with mutable data (e.g. Java), programmers are obsessed with aliasing and object identity.<ul><li>They have to be (!) so that subsequent assignments affect the right parts of the program.</li><li>Often crucial to make copies in just the right places.</li></ul></li><li>Reference (alias) vs. copy does not matter if code is immutable.</li></ol><h3>Pieces of a Language</h3><ol><li>Syntax</li><li>Semantics (evaluation rules)</li><li>Idioms (typical patterns for using language features to express the computation)</li><li>Libraries</li><li>Tools</li></ol><h3>Building Compound Types</h3><p>Three most important type building-blocks in any language:</p><ol><li>Each of: A <code class="language-text">t</code> value contains values of each of <code class="language-text">t1 t2 ... tn</code>. Such as tuples and records (idea of syntactic sugar and connection with tuples).</li><li>One of: A <code class="language-text">t</code> value contains values of ont of <code class="language-text">t1 t2 ... tn</code>. Such as option and a type that contains an int or string (will lead to pattern-matching).</li><li>Self reference: A <code class="language-text">t</code> value can refer to other <code class="language-text">t</code> values.</li></ol><h3>Records</h3><ol><li>Record values have fields (any name) holding values <code class="language-text">{f1 = v1, ... , fn = vn}</code>. Record types have fields holding types <code class="language-text">{f1 : t1, ..., fn : tn}</code>. The order of fields in a record value of type never matters. REPL alphabetizes fields just for consistency.</li><li>Building records: <code class="language-text">{f1 = e1, ..., fn = en}</code></li><li>Accessing pieces: <code class="language-text">#myfieldname e</code></li><li>Evaluation rules and type-checking as expected.</li><li>A common decision for a construct’s syntax is whether to refer to things by position (as in tuples) or by some (field) name (as with records).<ul><li>A common hybrid is like with Java method arguments (and ML functions are used so far):<ul><li>Caller uses position</li><li>Callee uses variables</li><li>Could do it differently</li></ul></li></ul></li><li>Tuples are just syntactic sugar for records with fields named 1, 2, …<ul><li>Syntactic: Can describe the semantics entirely by the corresponding record syntax.</li><li>They simplify understanding / implementing the langauge.</li></ul></li></ol><h3>Datatype Bindings</h3><ol><li>A way to make one-of types: <ul><li>A <code class="language-text">datatype</code> binding</li></ul><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">datatype</span> <span class="token class-name">mytype</span> <span class="token operator">=</span> 
  TwoInts <span class="token keyword">of</span> int <span class="token operator">*</span> int
  <span class="token operator">|</span> Str <span class="token keyword">of</span> string
  <span class="token operator">|</span> Pizza</code></pre></div></li></ol><ul><li>Adds a new type <code class="language-text">mytype</code> to the environment</li><li>Adds constructors to the environment: <code class="language-text">TwoInts</code>, <code class="language-text">Str</code> and <code class="language-text">Pizza</code><ul><li><code class="language-text">TwoInts : int * int -&gt; mytype</code></li><li><code class="language-text">Str : string -&gt; mytype</code></li><li><code class="language-text">Pizza : mytype</code></li></ul></li></ul><ol start="2"><li>A constructor is (among other things), a <strong>function</strong> that makes values of the new type (or is a value of the new type):</li></ol><ul><li>Any value of type <code class="language-text">mytype</code> is made from one of the constructors.</li><li>The value contains:<ul><li>A tag for which constructor (e.g. TwoInts)</li><li>The corresponding data (e.g. (7, 9)) </li></ul></li></ul><ol start="3"><li><p>In many other contexts, these datatypes are called tagged unions.</p></li><li><p>There are two aspects to accessing a datatype value:</p><ul><li>Check what variant it is (what constructor made it). <code class="language-text">null</code> and <code class="language-text">isSome</code> check variants.</li><li>Extract the data (if that variant has any). <code class="language-text">hd</code> <code class="language-text">tl</code> <code class="language-text">valOf</code> extract data (raise exception on wrong variant).</li></ul></li><li><p>Useful datatypes:</p><ul><li><p>Enumerations, including carrying other data.</p></li><li><p>Alternate ways of identifying real-world things/people.</p></li><li><p>Expression trees. This is an example using self-reference:</p><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">datatype</span> <span class="token class-name">exp</span> <span class="token operator">=</span> 
  Constant <span class="token keyword">of</span> int
  <span class="token operator">|</span> Negate <span class="token keyword">of</span> exp
  <span class="token operator">|</span> Add <span class="token keyword">of</span> exp <span class="token operator">*</span> exp
  <span class="token operator">|</span> Multiply <span class="token keyword">of</span> exp <span class="token operator">*</span> exp

<span class="token comment">(* functions over recursive datatypes are usually recursive *)</span>

<span class="token keyword">fun</span> <span class="token function">eval</span> e <span class="token operator">=</span> 
  <span class="token keyword">case</span> e <span class="token keyword">of</span> 
    Constant i <span class="token operator">=&gt;</span> i
    <span class="token operator">|</span> Negate e2 <span class="token operator">=&gt;</span> <span class="token operator">~</span> <span class="token punctuation">(</span>eval e2<span class="token punctuation">)</span>
    <span class="token operator">|</span> Add <span class="token punctuation">(</span>e1<span class="token punctuation">,</span> e2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>eval e1<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>eval e2<span class="token punctuation">)</span>
    <span class="token operator">|</span> Multiply <span class="token punctuation">(</span>e1<span class="token punctuation">,</span> e2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>eval e1<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>eval e2<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">number_of_adds</span> e <span class="token operator">=</span> 
  <span class="token keyword">case</span> e <span class="token keyword">of</span>
    Constant i <span class="token operator">=&gt;</span> <span class="token number">0</span>
    <span class="token operator">|</span> Negate e2 <span class="token operator">=&gt;</span> number_of_adds e2
    <span class="token operator">|</span> Add <span class="token punctuation">(</span>e1<span class="token punctuation">,</span> e2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">1</span> <span class="token operator">+</span> number_of_adds e1 <span class="token operator">+</span> number_of_adds e2
    <span class="token operator">|</span> Multiply <span class="token punctuation">(</span>e1<span class="token punctuation">,</span> e2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> number_of_adds e1 <span class="token operator">+</span> number_of_adds e2</code></pre></div></li><li><p>Lists and Options are datatypes.</p><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">datatype</span> <span class="token class-name">my_int_list</span> <span class="token operator">=</span> Empty <span class="token operator">|</span> Cons <span class="token keyword">of</span> int <span class="token operator">*</span> my_int_list

<span class="token keyword">fun</span> <span class="token function">inc_or_zero</span> intoption <span class="token operator">=</span> 
  <span class="token keyword">case</span> intoption <span class="token keyword">of</span>
    NONE <span class="token operator">=&gt;</span> <span class="token number">0</span>
    <span class="token operator">|</span> SOME i <span class="token operator">=&gt;</span> i <span class="token operator">+</span> <span class="token number">1</span>

<span class="token keyword">fun</span> <span class="token function">append</span> <span class="token punctuation">(</span>xs<span class="token punctuation">,</span> ys<span class="token punctuation">)</span> <span class="token operator">=</span>
  <span class="token keyword">case</span> xs <span class="token keyword">of</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> ys
    <span class="token operator">|</span> x <span class="token operator">::</span> xs&#x27; <span class="token operator">=&gt;</span> x <span class="token operator">::</span> append <span class="token punctuation">(</span>xs&#x27;<span class="token punctuation">,</span> ys<span class="token punctuation">)</span></code></pre></div></li></ul></li><li><p>Polymorphic Datatypes:</p><ul><li>Syntax: put one or more type variables before datatype name. Can use these type variables in constructor definitions. Binding then introduces a type constructor, not a type. (Must say <code class="language-text">int mylist</code>, <code class="language-text">&#x27;a mylist</code>, not <code class="language-text">mylist</code>).</li></ul><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">datatype</span> <span class="token variable">&#x27;a</span> mylist <span class="token operator">=</span> Empty <span class="token operator">|</span> Cons <span class="token keyword">of</span> <span class="token variable">&#x27;a</span> <span class="token operator">*</span> <span class="token variable">&#x27;a</span> mylist

<span class="token keyword">datatype</span> <span class="token punctuation">(</span><span class="token variable">&#x27;a</span><span class="token punctuation">,</span> <span class="token variable">&#x27;b</span><span class="token punctuation">)</span> tree <span class="token operator">=</span> 
  Node <span class="token keyword">of</span> <span class="token variable">&#x27;a</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token variable">&#x27;a</span><span class="token punctuation">,</span> <span class="token variable">&#x27;b</span><span class="token punctuation">)</span> tree <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token variable">&#x27;a</span><span class="token punctuation">,</span> <span class="token variable">&#x27;b</span><span class="token punctuation">)</span> tree
  <span class="token operator">|</span> Leaf <span class="token keyword">of</span> <span class="token variable">&#x27;b</span></code></pre></div></li></ol><ul><li>Use constructors and case expressions as usual. No change to evaluation rules. Type-checking will make sure types are used consistently. For example, cannot mix element types of list. Functions will be polymorphic or not based on how data is used.</li></ul><h3>Case Expressions</h3><ol><li>ML combines the two aspects of accessing a one-of value with a case expression and pattern-matching.</li></ol><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">fun</span> <span class="token function">f</span> <span class="token punctuation">(</span>x <span class="token punctuation">:</span> <span class="token class-name">mytype</span><span class="token punctuation">)</span> <span class="token operator">=</span> 
  <span class="token keyword">case</span> x <span class="token keyword">of</span>
    Pizza <span class="token operator">=&gt;</span> <span class="token number">3</span>
    <span class="token operator">|</span> Str s <span class="token operator">=&gt;</span> <span class="token number">8</span>
    <span class="token operator">|</span> TwoInts <span class="token punctuation">(</span>i1<span class="token punctuation">,</span> i2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> i1 <span class="token operator">+</span> i2</code></pre></div><ul><li>A multi-branch conditional to pick branch based on variant.</li><li>Extracts data and binds to variables local to that branch.</li><li>Type-checking: all branches must have same type.</li><li>Evaluation: evaluate between case … of and the right branch.</li><li>Patterns are not expressions: We do not evaluate them. We see if the result of <code class="language-text">e0</code> matches them.</li></ul><h3>Type Synonyms</h3><ol><li>Creating new types:</li></ol><ul><li>A datatype binding introduces a new type name.<ul><li>Distinct from all existing types.</li><li>Only way to create values of the new type is the constructors.</li></ul></li><li>A type synonym is a new kind of binding <code class="language-text">type aname = t</code>.<ul><li>Just creates another name for a type.</li><li>The type and the name are interchangeable in every way.</li><li>Do not worry about that REPL prints: picks what it wants just like it picks the order of record field names.</li></ul></li></ul><ol start="2"><li>A convenience for talking about types. Related to modularity.</li></ol><h3>Each of Pattern Matching</h3><ol><li>Pattern matching also works for records and tuples.</li><li>Val-binding patterns: variables are just one kind of pattern. </li><li>A function argument can also be a pattern. What we call multi-argument functions are just functions taking one tuple argument, implemented with a tuple pattern in the function binding. Zero arguments is the unit pattern () matching the unit value ().</li></ol><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">fun</span> <span class="token function">sum_triple</span> triple <span class="token operator">=</span> 
  <span class="token keyword">case</span> triple <span class="token keyword">of</span>
    <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z

<span class="token keyword">fun</span> <span class="token function">sum_triple1</span> triple <span class="token operator">=</span> 
  <span class="token keyword">let</span> <span class="token keyword">val</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span> <span class="token operator">=</span> triple
  <span class="token keyword">in</span>
    x <span class="token operator">+</span> y <span class="token operator">+</span> z
  <span class="token keyword">end</span>

<span class="token keyword">fun</span> <span class="token function">sum_triple2</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span> <span class="token operator">=</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z</code></pre></div><h3>Polymorphic and Equality types</h3><ol><li>The <strong>more general</strong> rule: A type t1 is more general than the type t2 if you can take t1, replace its type variables consistently, and get t2.</li></ol><ul><li>Example: replace each <code class="language-text">&#x27;a</code> with <code class="language-text">int * int</code></li><li>Example: replace each <code class="language-text">&#x27;b</code> with <code class="language-text">&#x27;a</code> and each <code class="language-text">&#x27;a</code> with <code class="language-text">&#x27;a</code></li></ul><ol start="2"><li>Can combine the <strong>more general</strong> rule with rules for equivalence:</li></ol><ul><li>Use of type synonyms does not matter</li><li>Order of field names does not matter</li></ul><ol start="3"><li>Type variables with a second quote such as <code class="language-text">&#x27;&#x27;a list * &#x27;&#x27;a -&gt; bool</code> are <strong>equality types</strong> that arise from using the = operator. The = operator works on lots of types: int, string, tuples containing all equality types… But not all types: function types, real…</li><li>The rules for more general are exactly the same except you have to replace an equality-type variable with a type taht can be used with =.</li></ol><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token comment">(* &#x27;&#x27;a * &#x27;&#x27;a -&gt; string *)</span>
<span class="token keyword">fun</span> <span class="token function">same_thing</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=</span>
  <span class="token keyword">if</span> x <span class="token operator">=</span> y <span class="token keyword">then</span> <span class="token string">&quot;yes&quot;</span> <span class="token keyword">else</span> <span class="token string">&quot;no&quot;</span></code></pre></div><h3>Nested Patterns</h3><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">fun</span> <span class="token function">zip</span> list_triple <span class="token operator">=</span>
  <span class="token keyword">case</span> list_triple <span class="token keyword">of</span>
    <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token operator">|</span> <span class="token punctuation">(</span>hd1 <span class="token operator">::</span> tl1<span class="token punctuation">,</span> hd2 <span class="token operator">::</span> tl2<span class="token punctuation">,</span> hd3 <span class="token operator">::</span> tl3<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
      <span class="token punctuation">(</span>hd1<span class="token punctuation">,</span> hd2<span class="token punctuation">,</span> hd3<span class="token punctuation">)</span> <span class="token operator">::</span> zip <span class="token punctuation">(</span>tl1<span class="token punctuation">,</span> tl2<span class="token punctuation">,</span> tl3<span class="token punctuation">)</span>
    <span class="token operator">|</span> _ <span class="token operator">=&gt;</span> <span class="token keyword">raise</span> ListLengthMismatch

<span class="token keyword">fun</span> <span class="token function">unzip</span> lst <span class="token operator">=</span> 
  <span class="token keyword">case</span> lst <span class="token keyword">of</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token operator">::</span> tl <span class="token operator">=&gt;</span> 
      <span class="token keyword">let</span> <span class="token keyword">val</span> <span class="token punctuation">(</span>l1<span class="token punctuation">,</span> l2<span class="token punctuation">,</span> l3<span class="token punctuation">)</span> <span class="token operator">=</span> unzip tl
      <span class="token keyword">in</span> <span class="token punctuation">(</span>a <span class="token operator">::</span> l1<span class="token punctuation">,</span> b <span class="token operator">::</span> l2<span class="token punctuation">,</span> c <span class="token operator">::</span> l3<span class="token punctuation">)</span> <span class="token keyword">end</span>

<span class="token keyword">fun</span> <span class="token function">multsign</span> <span class="token punctuation">(</span>x1<span class="token punctuation">,</span> x2<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token comment">(* int * int -&gt; sgn *)</span>
  <span class="token keyword">let</span> <span class="token keyword">fun</span> <span class="token function">sign</span> x <span class="token operator">=</span> <span class="token keyword">if</span> x <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">then</span> Z <span class="token keyword">else</span> <span class="token keyword">if</span> x <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">then</span> P <span class="token keyword">else</span> N
  <span class="token keyword">in</span>
    <span class="token keyword">case</span> <span class="token punctuation">(</span>sign x1<span class="token punctuation">,</span> sign x2<span class="token punctuation">)</span> <span class="token keyword">of</span>
      <span class="token punctuation">(</span>Z<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Z
    <span class="token operator">|</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> Z<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Z
    <span class="token operator">|</span> <span class="token punctuation">(</span>P<span class="token punctuation">,</span> P<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> P
    <span class="token operator">|</span> <span class="token punctuation">(</span>N<span class="token punctuation">,</span> N<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> P
    <span class="token operator">|</span> <span class="token punctuation">(</span>N<span class="token punctuation">,</span> P<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> N
    <span class="token operator">|</span> <span class="token punctuation">(</span>P<span class="token punctuation">,</span> N<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> N
  <span class="token keyword">end</span></code></pre></div><ol><li>We can nest patterns as deep as we want. The full meaning of pattern matching is to compare a pattern against a value for the same shape and bind variables to the right parts.</li><li>A common idiom is matching against a tuple of datatypes to compare them.</li><li>Wildcards are good style: use them instead of variables when you do not need the data.</li><li>The semantics for pattern-matching takes a pattern p and a value v and decides does it match and if so what variable bindings are introduced. Since patterns can nest, the definition is elegantly recursive, with a separate rule for each kind of pattern.</li><li>Function patterns: syntactic sugar of case expression.</li></ol><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">fun</span> <span class="token function">f</span> p1 <span class="token operator">=</span> e1
  <span class="token operator">|</span> f p2 <span class="token operator">=</span> e2
  <span class="token operator">|</span> f pn <span class="token operator">=</span> en

<span class="token keyword">fun</span> <span class="token function">append</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ys<span class="token punctuation">)</span> <span class="token operator">=</span> ys
  <span class="token operator">|</span> append <span class="token punctuation">(</span>x <span class="token operator">::</span> xs&#x27;<span class="token punctuation">,</span> ys<span class="token punctuation">)</span> <span class="token operator">=</span> x <span class="token operator">::</span> append <span class="token punctuation">(</span>xs&#x27;<span class="token punctuation">,</span> ys<span class="token punctuation">)</span></code></pre></div><h3>Exceptions</h3><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">fun</span> <span class="token function">maxlist</span> <span class="token punctuation">(</span>xs<span class="token punctuation">,</span> ex<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token comment">(* int list * exn -&gt; int *)</span>
  <span class="token keyword">case</span> xs <span class="token keyword">of</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token keyword">raise</span> ex
  <span class="token operator">|</span> x <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> x
  <span class="token operator">|</span> x <span class="token operator">::</span> xs&#x27; <span class="token operator">=&gt;</span> Int<span class="token punctuation">.</span>max<span class="token punctuation">(</span>x<span class="token punctuation">,</span> maxlist <span class="token punctuation">(</span>xs&#x27;<span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">exception</span> <span class="token class-name">MyException</span> <span class="token keyword">of</span> int <span class="token operator">*</span> int
<span class="token keyword">exception</span> <span class="token class-name">MySimpleException</span>

<span class="token keyword">val</span> x <span class="token operator">=</span> maxlist <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> MySimpleException<span class="token punctuation">)</span>
        <span class="token keyword">handle</span> MySimpleException <span class="token operator">=&gt;</span> <span class="token number">0</span>

<span class="token keyword">val</span> w <span class="token operator">=</span> maxlist <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> MyException <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">handle</span> MyException <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y</code></pre></div><ol><li>Exceptions are a lot like datatype constructors.</li><li>Declaring an exception makes adds a constructor for type <code class="language-text">exn</code>.</li><li>Can pass values of <code class="language-text">exn</code> anywhere (e.g. function arguments).</li><li>Handle can have multiple branches with patterns for type <code class="language-text">exn</code>.</li></ol><h3>Tail Recursion</h3><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">fun</span> <span class="token function">fact</span> n <span class="token operator">=</span> 
  <span class="token keyword">let</span> <span class="token keyword">fun</span> <span class="token function">aux</span> <span class="token punctuation">(</span>n<span class="token punctuation">,</span> acc<span class="token punctuation">)</span> <span class="token operator">=</span>
    <span class="token keyword">if</span> n <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">then</span> acc
    <span class="token keyword">else</span> aux <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> acc <span class="token operator">*</span> n<span class="token punctuation">)</span>
  <span class="token keyword">in</span> aux <span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">end</span>

<span class="token keyword">fun</span> <span class="token function">rev&#x27;</span> xs <span class="token operator">=</span> 
  <span class="token keyword">case</span> xs <span class="token keyword">of</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token comment">(* append must traverse the first list *)</span>
  <span class="token operator">|</span> x <span class="token operator">::</span> xs&#x27; <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>rev&#x27; xs&#x27;<span class="token punctuation">)</span> <span class="token operator">@</span> <span class="token punctuation">[</span>x<span class="token punctuation">]</span>

<span class="token keyword">fun</span> <span class="token function">rev</span> xs <span class="token operator">=</span> 
  <span class="token keyword">let</span> <span class="token keyword">fun</span> <span class="token function">aux</span> <span class="token punctuation">(</span>xs<span class="token punctuation">,</span> acc<span class="token punctuation">)</span> <span class="token operator">=</span>
    <span class="token keyword">case</span> xs <span class="token keyword">of</span>
      <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> acc
    <span class="token operator">|</span> x <span class="token operator">::</span> xs&#x27; <span class="token operator">=&gt;</span> aux <span class="token punctuation">(</span>xs&#x27;<span class="token punctuation">,</span> x <span class="token operator">::</span> acc<span class="token punctuation">)</span>
  <span class="token keyword">in</span> aux <span class="token punctuation">(</span>xs<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">end</span></code></pre></div><ol><li>While a program runs, there is a call stack of function calls that have started but not yet returned.</li></ol><ul><li>Calling a function f pushes an instance of f on the stack.</li><li>When a call to f finished, it is popped from the stack.</li><li>These stack-frames store information like the value of local variables and what is left to do in function. Due to recursion, multiple stack-frames may be calls to the same function.</li></ul><ol start="2"><li>An optimization: It is unnecessary to keep around a stack-frame just so it can get a callee’s result and return it without any further evaluaion. ML recognizes these tail calls in the compiler and treats them differently:</li></ol><ul><li>Pop the caller before the call, allowing callee to reuse the same stack space (tail-calls: nothing left for caller to do, so the pop caller).</li><li>Along with other optimizations, as efficient as a loop.
<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:600px">
      <a class="gatsby-resp-image-link" href="/static/e39f0b1763327ebb5c3e40ae3ae17c47/ff59c/tail.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:48.7719298245614%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB00lEQVQoz21RYW8SQRS8f19jpdxBsC36pdEKLVprUy0QaXOmauSDX0xNi0YLt1yBUg4DSO/29sa5PUqoYS+z+/a9N5O5t0YEflGEeHmTOrrDfXQ6xxh4VYxGhwhVFSqqIJBlyPBIxyo6JOcMpGKRH59GvN0lpHqLib8KcZPG1TCFdt9E8zKNXs/CYPAYo3GK9HVijZyTmaDCooaRBHEi3quMc8QTIo9ffQvffq5AOKt0t8l6no5jZNj/4Z7gfYdzwQpdZuhyXYu6fzIQAxNO6wFc9yFu6FyIRzxX2GsngtESwTuHoEOpshhOcpxjikQT43GW1U3ObWOGPBE7tJc7VIoppQjwV8qYBhZ+99LwhhbFMrj1c3OxUCWCYWSx39YcpUIkGjRFGFhYY76kNzUx/ZuH561R1GR2Yz5T4OkMWeIUy5YhnB7n0uWM+nCaP9AW50QDbrvB2X2HaJ0TDT5MA63mGc8LuOKCPZesd+A4XcbXGp2raxg7hRpKxRqqR1+x/byMYsFGafcUB/t1xjVsbVWw9+ozDt7Usf2sgsKLE7ze+4KXpY8o7bzXnN3iMe82yu8+wZAyRAzfDxAQcRwEAe++RvjfXdd1r4R/m9xlINkjtcY/9CzdYAnWK88AAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <picture>
          <source srcSet="/static/e39f0b1763327ebb5c3e40ae3ae17c47/35ebc/tail.webp 285w,/static/e39f0b1763327ebb5c3e40ae3ae17c47/8865d/tail.webp 570w,/static/e39f0b1763327ebb5c3e40ae3ae17c47/f8b1b/tail.webp 600w" sizes="(max-width: 600px) 100vw, 600px" type="image/webp"/>
          <source srcSet="/static/e39f0b1763327ebb5c3e40ae3ae17c47/5459c/tail.png 285w,/static/e39f0b1763327ebb5c3e40ae3ae17c47/2cee3/tail.png 570w,/static/e39f0b1763327ebb5c3e40ae3ae17c47/ff59c/tail.png 600w" sizes="(max-width: 600px) 100vw, 600px" type="image/png"/>
          <img class="gatsby-resp-image-image" src="/static/e39f0b1763327ebb5c3e40ae3ae17c47/ff59c/tail.png" alt="tail" title="tail" loading="lazy" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0"/>
        </picture>
  </a>
    </span></li></ul><ol start="3"><li>Accumulators for tail recursion: </li></ol><ul><li>Tail-recursive: recursive calls are tail-calls.</li><li>A methodology that can often guide this transformation: Create a helper function that takes an accumulator. Old base case becomes initial accumulator. New base case becomes final accumulator.</li></ul><ol start="4"><li>There are certainly cases where recursive functions cannot be evaluated in a constant amount of space. Most obvious examples are functions that process trees. In these cases, the natural recursive approach is the way to go.</li><li>A tail call is a function call in tail position. If an expression is not in tail position, then no subexpressions are. The nothing left for caller to do intuition usually suffices.</li></ol><h3>First-Class Functions</h3><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">fun</span> <span class="token function">n_times</span> <span class="token punctuation">(</span>f<span class="token punctuation">,</span> n<span class="token punctuation">,</span> x<span class="token punctuation">)</span> <span class="token operator">=</span> 
  <span class="token keyword">if</span> n <span class="token operator">=</span> <span class="token number">0</span> 
  <span class="token keyword">then</span> x
  <span class="token keyword">else</span> f <span class="token punctuation">(</span>n_times <span class="token punctuation">(</span>f<span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">increment</span> x <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">1</span>
<span class="token keyword">fun</span> <span class="token function">double</span> x <span class="token operator">=</span> x <span class="token operator">+</span> x

<span class="token keyword">val</span> x1 <span class="token operator">=</span> n_times <span class="token punctuation">(</span>double<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> x2 <span class="token operator">=</span> n_times <span class="token punctuation">(</span>increment<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> x3 <span class="token operator">=</span> n_times <span class="token punctuation">(</span>tl<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">triple_n_times</span> <span class="token punctuation">(</span>n<span class="token punctuation">,</span> x<span class="token punctuation">)</span> <span class="token operator">=</span> 
  n_times <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">fn</span> x <span class="token operator">=&gt;</span> <span class="token number">3</span> <span class="token operator">*</span> x<span class="token punctuation">)</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> x<span class="token punctuation">)</span></code></pre></div><ol><li>Functions are values too. Higher order functions are the most useful ones when you want to abstract over what to compute with.</li><li>Function closure: Functions can use bindings from outside the function definition (in scope where function is defined).</li><li>Anonymous functions: most commonly used as argument to a higher-order function. Do not need a name just to pass a function. Can not use an anonymous function for a recursive function. If not for recursion, <code class="language-text">fun</code> bindings would be syntatic sugar for <code class="language-text">val</code> bindings and anonymous functions.</li></ol><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">fun</span> <span class="token function">triple</span> x <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">*</span> x
<span class="token keyword">val</span> triple <span class="token operator">=</span> <span class="token keyword">fn</span> y <span class="token operator">=&gt;</span> <span class="token number">3</span> <span class="token operator">*</span> y</code></pre></div><ol start="4"><li>Map and filter: predefined in <code class="language-text">List</code>.</li></ol><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token comment">(* (&#x27;a -&gt; &#x27;b) * &#x27;a list -&gt; &#x27;b list *)</span>
<span class="token keyword">fun</span> <span class="token function">map</span> <span class="token punctuation">(</span>f<span class="token punctuation">,</span> xs<span class="token punctuation">)</span> <span class="token operator">=</span>
  <span class="token keyword">case</span> xs <span class="token keyword">of</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token operator">|</span> x <span class="token operator">::</span> xs&#x27; <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>f x<span class="token punctuation">)</span> <span class="token operator">::</span> map <span class="token punctuation">(</span>f<span class="token punctuation">,</span> xs&#x27;<span class="token punctuation">)</span>

<span class="token keyword">val</span> x1 <span class="token operator">=</span> map <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">fn</span> x <span class="token operator">=&gt;</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> x2 <span class="token operator">=</span> map <span class="token punctuation">(</span>hd<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">(* (&#x27;a -&gt; bool) * &#x27;a list -&gt; &#x27;a list *)</span>
<span class="token keyword">fun</span> <span class="token function">filter</span> <span class="token punctuation">(</span>f<span class="token punctuation">,</span> xs<span class="token punctuation">)</span> <span class="token operator">=</span> 
  <span class="token keyword">case</span> xs <span class="token keyword">of</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token operator">|</span> x <span class="token operator">::</span> xs&#x27; <span class="token operator">=&gt;</span> <span class="token keyword">if</span> f x
                  <span class="token keyword">then</span> x <span class="token operator">::</span> <span class="token punctuation">(</span>filter <span class="token punctuation">(</span>f<span class="token punctuation">,</span> xs&#x27;<span class="token punctuation">)</span><span class="token punctuation">)</span>
                  <span class="token keyword">else</span> filter <span class="token punctuation">(</span>f<span class="token punctuation">,</span> xs&#x27;<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">is_even</span> v <span class="token operator">=</span> 
  <span class="token punctuation">(</span>v mod <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">all_even</span> xs <span class="token operator">=</span> filter <span class="token punctuation">(</span>is_even<span class="token punctuation">,</span> xs<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">all_even_snd</span> xs <span class="token operator">=</span> filter <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">fn</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> is_even v<span class="token punctuation">)</span><span class="token punctuation">,</span> xs<span class="token punctuation">)</span></code></pre></div><ol start="5"><li>Fold: (synonyms / close relatives reduce, inject, etc.) is another very famous iterator over recursive structures. Accumulates an answer by repeatedly applying f to answer so far. These iterator-like functions are not built into SML. It is just a programming pattern. This pattern separates recursive traversal from data processing. Can reuse same traversal for different data processing. Can reuse same data processing for different data structures.</li></ol><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">fun</span> <span class="token function">fold</span> <span class="token punctuation">(</span>f<span class="token punctuation">,</span> acc<span class="token punctuation">,</span> xs<span class="token punctuation">)</span> <span class="token operator">=</span> 
  <span class="token keyword">case</span> xs <span class="token keyword">of</span> 
    <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> acc
    <span class="token operator">|</span> x <span class="token operator">::</span> xs <span class="token operator">=&gt;</span> fold <span class="token punctuation">(</span>f<span class="token punctuation">,</span> f <span class="token punctuation">(</span>acc<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">,</span> xs<span class="token punctuation">)</span></code></pre></div><h3>Lexical Scope</h3><ol><li>Closures:</li></ol><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">val</span> x <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">(* x maps to 1 *)</span>
<span class="token keyword">fun</span> <span class="token function">f</span> y <span class="token operator">=</span> x <span class="token operator">+</span> y <span class="token comment">(* f maps to a function that adds 1 to its argument *)</span>
<span class="token keyword">val</span> x <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">(* x maps to 2 *)</span>
<span class="token keyword">val</span> y <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">(* y maps to 3 *)</span>
<span class="token keyword">val</span> z <span class="token operator">=</span> f <span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">)</span> <span class="token comment">(* call the function defined on line 4 with 5 *)</span> 
<span class="token comment">(* z maps to 6 *)</span></code></pre></div><ul><li>How can functions be evaluated in old enviroments that are not around anymore? The language implementation keeps them around as necessary. Can define the semantics of functions as follows:<ul><li>A function value has two parts: the code and the environment that was current when the function was defined.</li><li>This is a pair but unlike ML pairs. You cannot access the pieces. All you can do is call this pair. This pair is called a function closure.</li><li>A call evaluates the code part in the environment part (extended with the function argument).</li></ul></li><li>Line 2 creates a closure and binds f to it.<ul><li>Code: take y and body x + y</li><li>Environment: x maps to 1. (Plus whatever else is in scope, including f for recursion)</li></ul></li><li>Line 5 calls the closure defined in line 2 with 5. So body evaluated in environment x maps to 1 extended with y maps to 5.</li></ul><ol start="2"><li>Lexical scope and higher-order functions: the rule stays the same. A function body is evaluated in the environment where the function was defined. (Extended with the function argument). Nothing changes to this rule when we take and return functions. (But the environment may involve nested let-expressions, not just the top-level sequence of bindings). Makes first-class functions much more powerful.</li><li>Why lexical scope:</li></ol><ul><li>Lexical scope: use environment where function is defined.</li><li>Dynamic scope: use environment where function is called.</li><li>Function meaning does not depend on variable names used:<ul><li>Can change body of f to use q everywhere instead of x.</li><li>Can remove unused variables.</li></ul></li><li>Functions can be type-checked and reasoned about where defined.</li><li>Closures can easily store the data they need.</li><li>Lexical scope for variables is definitely the right default (very common across languages). Dynamic scope is occassionally convenient in some situations. So some languages (e.g. Racket) have special ways to do it. Exception handling is more like dynamic scope. <code class="language-text">raise e</code> transfers control to the current innermost handler. Does not have to be syntactically inside a handle expression (and usually is not).</li></ul><h3>Closures and Recomputation</h3><ol><li>When things evaluate: a function body is not evaluated until the function is called. A function body is evaluated every time the function is called. A variable binding evaluates its expression when the bining is evaluated, not every time the variable is used. With closures, this means we can avoid repeating computations that do not depend on function arguments.</li></ol><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">fun</span> <span class="token function">filter</span> <span class="token punctuation">(</span>f<span class="token punctuation">,</span> xs<span class="token punctuation">)</span> <span class="token operator">=</span>
  <span class="token keyword">case</span> xs <span class="token keyword">of</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token operator">|</span> x <span class="token operator">::</span> xs&#x27; <span class="token operator">=&gt;</span> <span class="token keyword">if</span> f x
                  <span class="token keyword">then</span> x <span class="token operator">::</span> filter <span class="token punctuation">(</span>f<span class="token punctuation">,</span> xs&#x27;<span class="token punctuation">)</span>
                  <span class="token keyword">else</span> filter <span class="token punctuation">(</span>f<span class="token punctuation">,</span> xs&#x27;<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">allShorterThan1</span> <span class="token punctuation">(</span>xs<span class="token punctuation">,</span> s<span class="token punctuation">)</span> <span class="token operator">=</span> 
  filter <span class="token punctuation">(</span><span class="token keyword">fn</span> x <span class="token operator">=&gt;</span> String<span class="token punctuation">.</span>size x <span class="token operator">&lt;</span> String<span class="token punctuation">.</span>size s<span class="token punctuation">,</span> xs<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">allShorterThan2</span> <span class="token punctuation">(</span>xs<span class="token punctuation">,</span> s<span class="token punctuation">)</span> <span class="token operator">=</span>
  <span class="token keyword">let</span> 
    <span class="token keyword">val</span> i <span class="token operator">=</span> String<span class="token punctuation">.</span>size s
  <span class="token keyword">in</span> 
    filter <span class="token punctuation">(</span><span class="token keyword">fn</span> x <span class="token operator">=&gt;</span> String<span class="token punctuation">.</span>size x <span class="token operator">&lt;</span> i<span class="token punctuation">,</span> xs<span class="token punctuation">)</span> 
  <span class="token keyword">end</span></code></pre></div><ol start="2"><li>Closure Idioms:</li></ol><ul><li>Pass functions with private data to iterators</li><li>Combining functions (e.g. composition)</li></ul><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">fun</span> <span class="token function">compose</span> <span class="token punctuation">(</span>f<span class="token punctuation">,</span> g<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">fn</span> x <span class="token operator">=&gt;</span> f <span class="token punctuation">(</span>g x<span class="token punctuation">)</span>
<span class="token keyword">fun</span> <span class="token function">sqrt_of_abs</span> i <span class="token operator">=</span> Math<span class="token punctuation">.</span>sqrt <span class="token punctuation">(</span>Real<span class="token punctuation">.</span>fromInt <span class="token punctuation">(</span>abs i<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">fun</span> <span class="token function">sqrt_of_abs&#x27;</span> i <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span>sqrt o Real<span class="token punctuation">.</span>fromInt o abs<span class="token punctuation">)</span> i
<span class="token keyword">val</span> sqrt_of_abs&#x27;&#x27; <span class="token operator">=</span> Math<span class="token punctuation">.</span>sqrt o Real<span class="token punctuation">.</span>fromInt o abs

<span class="token keyword">infix</span> <span class="token operator">!</span><span class="token operator">&gt;</span>
<span class="token keyword">fun</span> <span class="token function">x</span> <span class="token operator">!</span><span class="token operator">&gt;</span> f <span class="token operator">=</span> f x
<span class="token keyword">fun</span> <span class="token function">sqrt_of_abs&#x27;&#x27;&#x27;</span> i <span class="token operator">=</span> i <span class="token operator">!</span><span class="token operator">&gt;</span> abs <span class="token operator">!</span><span class="token operator">&gt;</span> Real<span class="token punctuation">.</span>fromInt <span class="token operator">!</span><span class="token operator">&gt;</span> Math<span class="token punctuation">.</span>sqrt

<span class="token keyword">fun</span> <span class="token function">backup1</span> <span class="token punctuation">(</span>f<span class="token punctuation">,</span> g<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">fn</span> x <span class="token operator">=&gt;</span> <span class="token keyword">case</span> f x <span class="token keyword">of</span> 
                                NONE <span class="token operator">=&gt;</span> g x
                              <span class="token operator">|</span> SOME y <span class="token operator">=&gt;</span> y

<span class="token keyword">fun</span> <span class="token function">backup2</span> <span class="token punctuation">(</span>f<span class="token punctuation">,</span> g<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">fn</span> x <span class="token operator">=&gt;</span> f x <span class="token keyword">handle</span> _ <span class="token operator">=&gt;</span> g x</code></pre></div><ul><li>Currying (multi-arg functions and partial application). Efficiency: SML/NJ compiles tuples more efficiently. But many other functional language implementations do better with currying (OCaml, F#, Haskell).</li></ul><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">val</span> sorted3 <span class="token operator">=</span> <span class="token keyword">fn</span> x <span class="token operator">=&gt;</span> <span class="token keyword">fn</span> y <span class="token operator">=&gt;</span> <span class="token keyword">fn</span> z <span class="token operator">=&gt;</span> z <span class="token operator">&gt;=</span> y <span class="token keyword">andalso</span> y <span class="token operator">&gt;=</span> x

<span class="token keyword">val</span> t1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>sorted3 <span class="token number">7</span><span class="token punctuation">)</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token number">11</span>
<span class="token keyword">val</span> t2 <span class="token operator">=</span> sorted3 <span class="token number">7</span> <span class="token number">9</span> <span class="token number">11</span>

<span class="token keyword">fun</span> <span class="token function">sorted3_nicer</span> x y z <span class="token operator">=</span> z <span class="token operator">&gt;=</span> y <span class="token keyword">andalso</span> y <span class="token operator">&gt;=</span> x

<span class="token keyword">fun</span> <span class="token function">fold</span> f acc xs <span class="token operator">=</span> 
  <span class="token keyword">case</span> xs <span class="token keyword">of</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> acc
    <span class="token operator">|</span> x <span class="token operator">::</span> xs&#x27; <span class="token operator">=&gt;</span> fold f <span class="token punctuation">(</span>f<span class="token punctuation">(</span>acc<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span> xs&#x27;

<span class="token keyword">fun</span> <span class="token function">sum</span> xs <span class="token operator">=</span> fold <span class="token punctuation">(</span><span class="token keyword">fn</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y<span class="token punctuation">)</span> <span class="token number">0</span> xs 

<span class="token keyword">fun</span> <span class="token function">exists</span> predicate xs <span class="token operator">=</span>
  <span class="token keyword">case</span> xs <span class="token keyword">of</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token boolean">false</span>
  <span class="token operator">|</span> x <span class="token operator">::</span> xs&#x27; <span class="token operator">=&gt;</span> predicate x <span class="token keyword">orelse</span> exists predicate xs&#x27;

<span class="token keyword">val</span> hasZero <span class="token operator">=</span> exists <span class="token punctuation">(</span><span class="token keyword">fn</span> x <span class="token operator">=&gt;</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">curry</span> f <span class="token operator">=</span> <span class="token keyword">fn</span> x <span class="token operator">=&gt;</span> <span class="token keyword">fn</span> y <span class="token operator">=&gt;</span> f <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
<span class="token keyword">fun</span> <span class="token function">curry1</span> f x y <span class="token operator">=</span> f <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">uncurry</span> f <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=</span> f x y</code></pre></div><ul><li>Callbacks (e.g. in reactive programming): Library takes functions to apply later, when an event occurs. </li><li>Implementing an ADT with a record of functions.</li></ul><ol start="3"><li>Closure idioms without closures:</li></ol><ul><li>Higher-order programming is great.</li></ul><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">datatype</span> <span class="token variable">&#x27;a</span> mylist <span class="token operator">=</span> Cons <span class="token keyword">of</span> <span class="token variable">&#x27;a</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token variable">&#x27;a</span> mylist<span class="token punctuation">)</span> <span class="token operator">|</span> Empty

<span class="token keyword">fun</span> <span class="token function">map</span> f xs <span class="token operator">=</span>
  <span class="token keyword">case</span> xs <span class="token keyword">of</span>
    Empty <span class="token operator">=&gt;</span> Empty
  <span class="token operator">|</span> Cons <span class="token punctuation">(</span>x<span class="token punctuation">,</span> xs<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Cons <span class="token punctuation">(</span>f x<span class="token punctuation">,</span> map f xs<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">filter</span> f xs <span class="token operator">=</span> 
  <span class="token keyword">case</span> xs <span class="token keyword">of</span>
    Empty <span class="token operator">=&gt;</span> Empty
  <span class="token operator">|</span> Cons <span class="token punctuation">(</span>x<span class="token punctuation">,</span> xs<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">if</span> f x
                    <span class="token keyword">then</span> Cons <span class="token punctuation">(</span>x<span class="token punctuation">,</span> filter f xs<span class="token punctuation">)</span>
                    <span class="token keyword">else</span> filter f xs

<span class="token keyword">fun</span> <span class="token function">length</span> xs <span class="token operator">=</span> 
  <span class="token keyword">case</span> xs <span class="token keyword">of</span>
    Empty <span class="token operator">=&gt;</span> <span class="token number">0</span>
  <span class="token operator">|</span> Cons <span class="token punctuation">(</span>x<span class="token punctuation">,</span> xs<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">1</span> <span class="token operator">+</span> length xs

<span class="token keyword">val</span> doubleAll <span class="token operator">=</span> map <span class="token punctuation">(</span><span class="token keyword">fn</span> x <span class="token operator">=&gt;</span> x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">countNs</span> <span class="token punctuation">(</span>xs<span class="token punctuation">,</span> n <span class="token punctuation">:</span> <span class="token class-name">int</span><span class="token punctuation">)</span> <span class="token operator">=</span> length <span class="token punctuation">(</span>filter <span class="token punctuation">(</span><span class="token keyword">fn</span> x <span class="token operator">=&gt;</span> x <span class="token operator">=</span> n<span class="token punctuation">)</span> xs<span class="token punctuation">)</span></code></pre></div><ul><li>In OOP with one-method interfaces. An interface is a named <!-- -->[polymorphic]<!-- --> type. An object with one method can serve as a closure.</li></ul><div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">interface</span> <span class="token class-name">Func</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">B</span><span class="token punctuation">,</span> <span class="token class-name">A</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token class-name">B</span> <span class="token function">m</span><span class="token punctuation">(</span><span class="token class-name">A</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Pred</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">A</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">boolean</span> <span class="token function">m</span><span class="token punctuation">(</span><span class="token class-name">A</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token class-name">T</span> head<span class="token punctuation">;</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> tail<span class="token punctuation">;</span>

  <span class="token class-name">List</span><span class="token punctuation">(</span><span class="token class-name">T</span> x<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> xs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    head <span class="token operator">=</span> x<span class="token punctuation">;</span>
    tail <span class="token operator">=</span> xs<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token class-name">B</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">B</span><span class="token punctuation">&gt;</span></span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Func</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">B</span><span class="token punctuation">,</span> <span class="token class-name">A</span><span class="token punctuation">&gt;</span></span> f<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">A</span><span class="token punctuation">&gt;</span></span> xs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xs <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">B</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">m</span><span class="token punctuation">(</span>xs<span class="token punctuation">.</span>head<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">map</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> xs<span class="token punctuation">.</span>tail<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">A</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">A</span><span class="token punctuation">&gt;</span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">Pred</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">A</span><span class="token punctuation">&gt;</span></span> f<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">A</span><span class="token punctuation">&gt;</span></span> xs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xs <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">m</span><span class="token punctuation">(</span>xs<span class="token punctuation">.</span>head<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">A</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>xs<span class="token punctuation">.</span>head<span class="token punctuation">,</span> <span class="token function">filter</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> xs<span class="token punctuation">.</span>tail<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">filter</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> xs<span class="token punctuation">.</span>tail<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">A</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">int</span> <span class="token function">length</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">A</span><span class="token punctuation">&gt;</span></span> xs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>xs <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token operator">++</span>ans<span class="token punctuation">;</span>
      xs <span class="token operator">=</span> xs<span class="token punctuation">.</span>tail<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> ans<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Clients</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">doubleAll</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> xs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Func</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">m</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> xs<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">countNs</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> xs<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Pred</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">m</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> x <span class="token operator">==</span> n<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> xs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><ul><li>In procedural with explicit environment arguments. In C, a function pointer is only a code pointer. A common technique: always define function pointers and higher-order functions to take an extra explicit environment argument. But without generics, no good choice for type of list elements or the environment. Use <code class="language-text">void*</code> and various type casts…</li></ul><div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">List</span> <span class="token class-name">list_t</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">List</span>
<span class="token punctuation">{</span>
  <span class="token keyword">void</span> <span class="token operator">*</span>head<span class="token punctuation">;</span>
  <span class="token class-name">list_t</span> <span class="token operator">*</span>tail<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">list_t</span> <span class="token operator">*</span><span class="token function">makelist</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>x<span class="token punctuation">,</span> <span class="token class-name">list_t</span> <span class="token operator">*</span>xs<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token class-name">list_t</span> <span class="token operator">*</span>ans <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">list_t</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token class-name">list_t</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ans<span class="token operator">-&gt;</span>head <span class="token operator">=</span> x<span class="token punctuation">;</span>
  ans<span class="token operator">-&gt;</span>tail <span class="token operator">=</span> xs<span class="token punctuation">;</span>
  <span class="token keyword">return</span> ans<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">list_t</span> <span class="token operator">*</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span>f<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>env<span class="token punctuation">,</span> <span class="token class-name">list_t</span> <span class="token operator">*</span>xs<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xs <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">makelist</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span>env<span class="token punctuation">,</span> xs<span class="token operator">-&gt;</span>head<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">map</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> env<span class="token punctuation">,</span> xs<span class="token operator">-&gt;</span>tail<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">list_t</span> <span class="token operator">*</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token function">bool</span> <span class="token punctuation">(</span><span class="token operator">*</span>f<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>env<span class="token punctuation">,</span> <span class="token class-name">list_t</span> <span class="token operator">*</span>xs<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xs <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span>env<span class="token punctuation">,</span> xs<span class="token operator">-&gt;</span>head<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token function">makelist</span><span class="token punctuation">(</span>xs<span class="token operator">-&gt;</span>head<span class="token punctuation">,</span> <span class="token function">filter</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> env<span class="token punctuation">,</span> xs<span class="token operator">-&gt;</span>tail<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">filter</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> env<span class="token punctuation">,</span> xs<span class="token operator">-&gt;</span>tail<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">length</span><span class="token punctuation">(</span><span class="token class-name">list_t</span> <span class="token operator">*</span>xs<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>xs <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token operator">++</span>ans<span class="token punctuation">;</span>
    xs <span class="token operator">=</span> xs<span class="token operator">-&gt;</span>tail<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> ans<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">doubleInt</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>ignore<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>i<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">intptr_t</span><span class="token punctuation">)</span>i<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// assumes list holds intptr_t fileds</span>
<span class="token class-name">list_t</span> <span class="token operator">*</span><span class="token function">doubleAll</span><span class="token punctuation">(</span><span class="token class-name">list_t</span> <span class="token operator">*</span>xs<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">map</span><span class="token punctuation">(</span>doubleInt<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> xs<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// type casts to match what filter expects</span>
bool <span class="token function">isN</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>n<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>i<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">intptr_t</span><span class="token punctuation">)</span>n<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">intptr_t</span><span class="token punctuation">)</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">countNs</span><span class="token punctuation">(</span><span class="token class-name">list_t</span> <span class="token operator">*</span>xs<span class="token punctuation">,</span> <span class="token class-name">intptr_t</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">length</span><span class="token punctuation">(</span><span class="token function">filter</span><span class="token punctuation">(</span>isN<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span>n<span class="token punctuation">,</span> xs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><h3>Mutable References</h3><ol><li>New types: <code class="language-text">t ref</code> where <code class="language-text">t</code> is a type</li><li>New expressions:</li></ol><ul><li><code class="language-text">ref e</code> to create a reference with initil contents <code class="language-text">e</code></li><li><code class="language-text">e1 := e2</code> to update contents</li><li><code class="language-text">!e</code> to retrieve contents (not negation)</li></ul><ol start="3"><li>A variable bound to a reference is still immutable: it will always refer to the same reference. But the contents of the reference may change via :=. And there may be aliases to the reference, which matters a lot. Reference are first-class values. Like a one-field mutable object, := and ! do not specify the field.</li></ol><h3>Type Inference</h3><ol><li>Type inference problem: give every binding/expression a type such that type-checking succeeds. Fail if and only if no solution exists. In principle, could be a pass before the type-checker. But often implemented together. </li><li>Central feature of ML type inference: it can infer types with type variables - relation to polymorphism. ML is in a sweet pot because type inference is more difficult without polymorphism or with subtyping.</li><li>Key steps: </li></ol><ul><li>Determine types of bindings in order (except for mutual recursion). So you can not use later bindings: will not type-check.</li><li>For each <code class="language-text">val</code> or <code class="language-text">fun</code> binding:<ul><li>Analyze definition for all necessary facts (constraints)</li><li>Example: if see <code class="language-text">x &gt; 0</code> then x must be type int</li><li>Type error if no way for all facts to hold (over-constrained)</li></ul></li><li>Afterward, use type variables (e.g. ‘a) for any unconstrained types. Example: an unused argument can have any type.</li><li>Finally, enforce the value restriction. A variable-binding can have a polymorphic type only if the expression is a variable or value. Else get a warning and unconstrained types are filled in with dummy types (basically unusable). The value restriction can cause problems when it is neccessary because we are not using mutation (Usually wrap in a function binding to fix it).</li></ul><h3>Mutual Recursion</h3><ol><li>Allow f to call g and g to call f:</li></ol><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">fun</span> <span class="token function">f1</span> p1 <span class="token operator">=</span> e1
<span class="token keyword">and</span> f2 p2 <span class="token operator">=</span> e2
<span class="token keyword">and</span> f3 p3 <span class="token operator">=</span> e3

<span class="token keyword">datatype</span> <span class="token class-name">t1</span> <span class="token operator">=</span> <span class="token operator">...</span>
<span class="token keyword">and</span> t2 <span class="token operator">=</span> <span class="token operator">...</span>
<span class="token keyword">and</span> t3 <span class="token operator">=</span> <span class="token operator">...</span></code></pre></div><ol start="2"><li>State-machine: each state of the computation is a function. State transition is call another function with rest of input. Generalizes to any finite-state-machine example.</li></ol><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">fun</span> <span class="token function">match</span> xs <span class="token operator">=</span>
  <span class="token keyword">let</span> 
    <span class="token keyword">fun</span> <span class="token function">s_need_one</span> xs <span class="token operator">=</span>
      <span class="token keyword">case</span> xs <span class="token keyword">of</span>
        <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span>
      <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">::</span> xs&#x27; <span class="token operator">=&gt;</span> s_need_two xs&#x27;
      <span class="token operator">|</span> _ <span class="token operator">=&gt;</span> <span class="token boolean">false</span>
    <span class="token keyword">and</span> s_need_two xs <span class="token operator">=</span> 
      <span class="token keyword">case</span> xs <span class="token keyword">of</span>
        <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token boolean">false</span>
      <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">::</span> xs&#x27; <span class="token operator">=&gt;</span> s_need_one xs&#x27;
      <span class="token operator">|</span> _ <span class="token operator">=&gt;</span> <span class="token boolean">false</span>
  <span class="token keyword">in</span> s_need_one xs <span class="token keyword">end</span></code></pre></div><h3>Modules</h3><ol><li>ML has structures to define modules. <code class="language-text">structure MyModule = struct bindings end</code>. This is namespace management. Can use <code class="language-text">open ModuleName</code> to get direct access to a module bindings. But often better to create local val-bindings for just the bindings.</li><li>A signature is a type for a module (what bindings does it have and what are their types). Can define a signature and ascribe it to modules. Real value of signatures is to hide bindings and type definitions.</li></ol><div class="gatsby-highlight" data-language="sml"><pre class="language-sml"><code class="language-sml"><span class="token keyword">signature</span> <span class="token class-name">MATHLIB</span> <span class="token operator">=</span>
<span class="token keyword">sig</span>
  <span class="token keyword">val</span> fact <span class="token punctuation">:</span> <span class="token class-name">int <span class="token operator">-&gt;</span> int</span>
  <span class="token keyword">val</span> half_pi <span class="token punctuation">:</span> <span class="token class-name">int</span>
<span class="token keyword">end</span>

<span class="token keyword">structure</span> <span class="token class-name">MyMathLib</span> <span class="token operator">:&gt;</span> MATHLIB <span class="token operator">=</span>
<span class="token keyword">struct</span>
  <span class="token keyword">fun</span> <span class="token function">fact</span> x <span class="token operator">=</span>
    <span class="token keyword">if</span> x <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">then</span> <span class="token number">1</span>
    <span class="token keyword">else</span> x <span class="token operator">*</span> fact <span class="token punctuation">(</span>x <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
  
  <span class="token keyword">val</span> half_pi <span class="token operator">=</span> Math<span class="token punctuation">.</span>pi <span class="token operator">/</span> <span class="token number">2.0</span>

  <span class="token keyword">fun</span> <span class="token function">doubler</span> y <span class="token operator">=</span> y <span class="token operator">+</span> y

  <span class="token keyword">val</span> eight <span class="token operator">=</span> doubler <span class="token number">4</span>
<span class="token keyword">end</span></code></pre></div><ol start="3"><li>Modules with the same signatures still define different types. Different modules have different internal invariants. In fact, they have different type definitions.</li></ol><h3>Equivalence</h3><ol><li>It is much easier to be equivalent if there are fewer possible arguments, e.g. with a type system and abstraction or avoiding side-effects: mutation, I/O, exceptions…</li><li>Different definitions of equivalence:</li></ol><ul><li>PL Eq: given same inputs, same outputs and effects.</li><li>Asymptotic Eq: ignore constant factors.</li><li>Systems Eq: Account for constant overheads, performance tune.</li></ul><blockquote><p>Note: for relevant code and more, see <a href="https://github.com/raptazure/pluw">https://github.com/raptazure/pluw</a></p></blockquote></article><div class="utterances" style="top:50px"></div></div></div></main><footer class="css-1wvahdb e1v9gu3l0"><style data-emotion-css="voneje">.css-voneje{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;}</style><style data-emotion-css="1u3kyku">.css-1u3kyku{position:relative;margin-left:auto;margin-right:auto;width:auto;max-width:40em;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;}</style><div class="e1v9gu3l1 css-1u3kyku eqdtqc0"><style data-emotion-css="19sj128">.css-19sj128{color:rgba(0,0,0,0.54);font-size:0.8rem;}.css-19sj128:hover,.css-19sj128:focus{-webkit-text-decoration:none;text-decoration:none;}</style><a class="css-19sj128 e1v9gu3l2" href="/about">Copyright © <!-- -->2022<!-- --> <!-- -->raptazure<!-- -->. Built with Gatsby.</a></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-128956609-1"></script><script>
    window.GATSBY_GTAG_PLUGIN_GA_TRACKING_ID = (
      'UA-128956609-1'
    );
    window.GATSBY_GTAG_PLUGIN_ANONYMIZE = true;

    var options = {
      send_page_view: false
    };
    if (true) {
      options.anonymize_ip = true;
    }

    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    window.gtag = gtag;
    gtag('js', new Date());
    gtag('config', 'UA-128956609-1', options);
  </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/sml/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-da20a1db8321d70d55d6.js"],"app":["/app-687b067c9b1f0def51ae.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-b0556ce5127c1a3e2490.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-05bc7059d2ca310545bc.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-7455f1e3e989707d4873.js"],"component---src-pages-journal-tsx":["/component---src-pages-journal-tsx-361a02f98a296e3dc239.js"],"component---src-templates-about-tsx":["/component---src-templates-about-tsx-e9d1ba47fa5db7a814bd.js"],"component---src-templates-journal-tsx":["/component---src-templates-journal-tsx-e836417590ea2f8a327d.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-e50663736f0d2a1c8060.js"]};/*]]>*/</script><script src="/polyfill-da20a1db8321d70d55d6.js" nomodule=""></script><script src="/component---src-templates-post-tsx-e50663736f0d2a1c8060.js" async=""></script><script src="/e30115b4d33dc6d7723ba506c53f6f70ec229815-a3762906aab692d550c9.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/app-687b067c9b1f0def51ae.js" async=""></script><script src="/framework-9252bfa5ea71b588207d.js" async=""></script><script src="/webpack-runtime-cdb2fbade185b8317bb8.js" async=""></script></body></html>